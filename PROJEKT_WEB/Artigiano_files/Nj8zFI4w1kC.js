/*!CK:1071135031!*//*1453502255,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["5co94"]); }

__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(ek,fk){var gk=ek.split("."),hk=k;gk[0] in hk||!hk.execScript||hk.execScript("var "+gk[0]);for(var ik;gk.length&&(ik=gk.shift());)gk.length||void 0===fk?hk[ik]?hk=hk[ik]:hk=hk[ik]={}:hk[ik]=fk;}function m(ek,fk){function gk(){}gk.prototype=fk.prototype;ek.rb=fk.prototype;ek.prototype=new gk();ek.prototype.constructor=ek;ek.nb=function(hk,ik,jk){return fk.prototype[ik].apply(hk,Array.prototype.slice.call(arguments,2));};}function n(ek,fk,gk){this.id=ek;this.bandwidth=fk||0;this.lang=gk||"unknown";this.active=false;}l("shaka.player.AudioTrack.compare",function(ek,fk){return ek.lang<fk.lang?-1:ek.lang>fk.lang?1:ek.bandwidth<fk.bandwidth?-1:ek.bandwidth>fk.bandwidth?1:0;});function o(ek,fk){this.id=ek;this.lang=fk||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(ek,fk){return ek.lang<fk.lang?-1:ek.lang>fk.lang?1:0;});function p(ek,fk,gk,hk){this.id=ek;this.bandwidth=fk||0;this.width=gk||0;this.height=hk||0;this.active=false;}function q(ek,fk){var gk=ek.width*ek.height,hk=fk.width*fk.height;return gk<hk?-1:gk>hk?1:ek.bandwidth<fk.bandwidth?-1:ek.bandwidth>fk.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",q);function r(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null;}r.prototype.clone=function(){var ek=new r();ek.maxHeight=this.maxHeight;ek.maxWidth=this.maxWidth;ek.maxBandwidth=this.maxBandwidth;ek.minBandwidth=this.minBandwidth;return ek;};function s(){var ek=Element.prototype;ek.requestFullscreen=ek.requestFullscreen||ek.mozRequestFullScreen||ek.msRequestFullscreen||ek.webkitRequestFullscreen;ek=Document.prototype;ek.exitFullscreen=ek.exitFullscreen||ek.mozCancelFullScreen||ek.msExitFullscreen||ek.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",t);document.addEventListener("webkitfullscreenerror",t);document.addEventListener("mozfullscreenchange",t);document.addEventListener("mozfullscreenerror",t);document.addEventListener("MSFullscreenChange",t);document.addEventListener("MSFullscreenError",t);}l("shaka.polyfill.Fullscreen.install",s);function t(ek){var fk=ek.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),fk=new Event(fk,ek);ek.target.dispatchEvent(fk);}function u(){var ek=HTMLVideoElement.prototype;!ek.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in ek&&(ek.getVideoPlaybackQuality=v);}l("shaka.polyfill.VideoPlaybackQuality.install",u);function v(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function w(){var ek="CustomEvent" in i;if(ek)try{new CustomEvent("");}catch(fk){ek=false;}ek||(i.CustomEvent=x);}l("shaka.polyfill.CustomEvent.install",w);function x(ek,fk){var gk=document.createEvent("CustomEvent"),hk=fk||{bubbles:false,cancelable:false,detail:null};gk.initCustomEvent(ek,!!hk.bubbles,!!hk.cancelable,hk.detail);return gk;}function y(ek){var fk=console[ek];fk?fk.bind||(console[ek]=function(){fk.apply(console,arguments);}):console[ek]=function(){};}y("error");y("warn");y("info");y("log");y("debug");function z(){}function aa(){this.fontSize="100%";this.fontColor=da;this.fontOpacity=fa;this.backgroundColor=ea;this.backgroundOpacity=fa;this.fontEdge=ga;}l("shaka.player.TextStyle",aa);aa.prototype.a=function(){var ek=i.localStorage.getItem("ShakaPlayerTextStyle");if(ek){var fk;try{fk=JSON.parse(ek);}catch(gk){return;}if(fk&&"object"==typeof fk){var ek=fk,hk;for(hk in ek)hk in this&&(this[hk]=ek[hk]);}}};aa.prototype.load=aa.prototype.a;aa.prototype.b=function(){i.localStorage.setItem("ShakaPlayerTextStyle",JSON.stringify(this));};aa.prototype.store=aa.prototype.b;function ba(ek){var fk=[];fk.push("font-size: "+ek.fontSize);fk.push("color: "+ca(ek.fontColor,ek.fontOpacity));fk.push("background-color: "+ca(ek.backgroundColor,ek.backgroundOpacity));for(var gk=[],hk=0;hk<ek.fontEdge.length;++hk){var ik=ek.fontEdge[hk].slice(3,6);gk.push(ca(ek.fontEdge[hk].slice(0,3),ek.fontOpacity)+" "+ik.join("px ")+"px");}fk.push("text-shadow: "+gk.join(","));return fk.join("; ");}function ca(ek,fk){return "rgba("+ek.concat(fk).join(",")+")";}var da=[255,255,255],ea=[0,0,0];aa.StandardColors={WHITE:da,BLACK:ea,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var fa=1;aa.StandardOpacities={OPAQUE:fa,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ga=[];aa.EdgeStyles={NONE:ga,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function ha(){return Promise.reject(Error("The key system specified is not supported."));}function ia(ek){return null==ek?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ja(){throw new TypeError("Illegal constructor.");}ja.prototype.createSession=function(){};ja.prototype.setServerCertificate=function(){};function ka(){throw new TypeError("Illegal constructor.");}ka.prototype.getConfiguration=function(){};ka.prototype.createMediaKeys=function(){};function la(ek){pa[ek]={aa:oa(),end:NaN};}function ma(ek){if(ek=pa[ek])ek.end=oa();}function na(ek){return (ek=pa[ek])&&ek.end?ek.end-ek.aa:NaN;}var oa=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,pa={};function qa(ek){var fk=new CustomEvent(ek.type,{detail:ek.detail,bubbles:!!ek.bubbles}),gk;for(gk in ek)gk in fk||(fk[gk]=ek[gk]);return fk;}function ra(ek){return new CustomEvent("error",{detail:ek,bubbles:true});}function sa(ek){this.c=Math.exp(Math.log(.5)/ek);this.a=this.b=0;}sa.prototype.sample=function(ek,fk){var gk=Math.pow(this.c,ek);this.b=fk*(1-gk)+gk*this.b;this.a+=ek;};function ta(ek){return ek.b/(1-Math.pow(ek.c,ek.a));}function ua(ek){this.b=ek;this.a=new tb(ek);va||(va=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var va;function wa(ek){var fk;fk=xa(ek);if(7<fk.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var gk=0,hk=0;hk<fk.length;hk++)gk=256*gk+fk[hk];fk=gk;gk=xa(ek);ek:{for(hk=0;hk<va.length;hk++)if(nb(gk,va[hk])){hk=true;break ek;}hk=false;};if(hk)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==gk.length&&gk[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var hk=gk[0]&(1<<8-gk.length)-1,ik=1;ik<gk.length;ik++)hk=256*hk+gk[ik];gk=hk;gk=ek.a.a+gk<=ek.b.byteLength?gk:ek.b.byteLength-ek.a.a;hk=new DataView(ek.b.buffer,ek.b.byteOffset+ek.a.a,gk);bc(ek.a,gk);return new ya(fk,hk);}function xa(ek){var fk=xb(ek.a),gk;for(gk=1;8>=gk&&!(fk&1<<8-gk);gk++);if(8<gk)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var hk=new Uint8Array(gk);hk[0]=fk;for(fk=1;fk<gk;fk++)hk[fk]=xb(ek.a);return hk;}function ya(ek,fk){this.id=ek;this.a=fk;}function za(ek){if(8<ek.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==ek.a.byteLength&&ek.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var fk=0,gk=0;gk<ek.a.byteLength;gk++)var hk=ek.a.getUint8(gk),fk=256*fk+hk;return fk;}function ab(ek,fk){return fk.bind(ek);}function bb(ek,fk){for(var gk={},hk=0;hk<ek.length;++hk){var ik=fk?fk(ek[hk]):ek[hk].toString();gk[ik]=ek[hk];}var hk=[],jk;for(jk in gk)hk.push(gk[jk]);return hk;}function cb(ek,fk,gk){fb(fk);fb(gk);return gk==fk||ek>=db&&gk==fk.split("-")[0]||ek>=eb&&gk.split("-")[0]==fk.split("-")[0]?true:false;}var db=1,eb=2;function fb(ek){ek=ek.toLowerCase().split("-");var fk=gb[ek[0]];fk&&(ek[0]=fk);return ek.join("-");}var gb={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"},hb=0;function ib(ek){ek.split("").reduce(function(fk,gk,hk){return fk+(hk&&0==hk%4?" "+gk:gk);});}function jb(ek){return String.fromCharCode.apply(null,ek);}l("shaka.util.Uint8ArrayUtils.toString",jb);function kb(ek){for(var fk=new Uint8Array(ek.length),gk=0;gk<ek.length;++gk)fk[gk]=ek.charCodeAt(gk);return fk;}l("shaka.util.Uint8ArrayUtils.fromString",kb);l("shaka.util.Uint8ArrayUtils.toBase64",function(ek,fk){var gk=void 0==fk?true:fk,hk=i.btoa(jb(ek)).replace(/\+/g,"-").replace(/\//g,"_");return gk?hk:hk.replace(/=*$/,"");});function lb(ek){return kb(i.atob(ek.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",lb);l("shaka.util.Uint8ArrayUtils.fromHex",function(ek){for(var fk=new Uint8Array(ek.length/2),gk=0;gk<ek.length;gk+=2)fk[gk/2]=i.parseInt(ek.substr(gk,2),16);return fk;});function mb(ek){for(var fk="",gk=0;gk<ek.length;++gk){var hk=ek[gk].toString(16);1==hk.length&&(hk="0"+hk);fk+=hk;}return fk;}l("shaka.util.Uint8ArrayUtils.toHex",mb);function nb(ek,fk){if(!ek&&!fk)return true;if(!ek||!fk||ek.length!=fk.length)return false;for(var gk=0;gk<ek.length;++gk)if(ek[gk]!=fk[gk])return false;return true;}function ob(){this.j=this.a="";this.o=false;this.g=this.f=null;this.l=this.i=false;this.s=this.h="";this.c=null;this.b=[];}function pb(ek,fk){var gk=ek.b.concat(fk.map(function(hk){return {initData:new Uint8Array(hk.initData.buffer),initDataType:hk.initDataType};}));ek.b=bb(gk,function(hk){return Array.prototype.join.apply(hk.initData)+","+hk.initDataType;});}function qb(ek,fk,gk,hk,ik,jk,kk,lk,mk,nk,ok){this.g=ek;this.j=fk;this.o=gk;this.a=[];this.h=ik||null;this.i=jk||null;this.f=kk==rb;this.l=lk==sb;this.c=mk||"";this.s=nk||"";this.b=ok||null;hk&&this.a.push(hk);}l("shaka.player.DrmSchemeInfo",qb);var rb=1;qb.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:rb};var sb=1;qb.PersistentState={OPTIONAL:0,REQUIRED:sb};qb.createUnencrypted=function(){return new qb("","",false,null);};function tb(ek){var fk=ub;this.b=ek;this.c=fk==vb;this.a=0;}var ub=0,vb=1;function wb(ek){return ek.a<ek.b.byteLength;}function xb(ek){var fk=ek.b.getUint8(ek.a);ek.a+=1;return fk;}function yb(ek){var fk=ek.b.getUint32(ek.a,ek.c);ek.a+=4;return fk;}function zb(ek){var fk,gk;ek.c?(fk=ek.b.getUint32(ek.a,true),gk=ek.b.getUint32(ek.a+4,true)):(gk=ek.b.getUint32(ek.a,false),fk=ek.b.getUint32(ek.a+4,false));if(2097151<gk)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");ek.a+=8;return gk*Math.pow(2,32)+fk;}function ac(ek){if(ek.a+16>ek.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var fk=new Uint8Array(ek.b.buffer,ek.a,16);ek.a+=16;return fk;}function bc(ek,fk){if(ek.a+fk>ek.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");ek.a+=fk;}function cc(ek){this.systemIds=[];this.cencKeyIds=[];ek=new tb(new DataView(ek.buffer));try{for(;wb(ek);){var gk=ek.a,hk=yb(ek),ik=yb(ek);1==hk?hk=zb(ek):0==hk&&(hk=ek.b.byteLength-gk);if(1886614376!=ik){bc(ek,hk-(ek.a-gk));}else{var jk=xb(ek);if(1<jk){bc(ek,hk-(ek.a-gk));}else{bc(ek,3);var kk=mb(ac(ek)),lk=[];if(0<jk)for(var mk=yb(ek),nk=0;nk<mk;++nk){var ok=mb(ac(ek));lk.push(ok);}var pk=yb(ek);bc(ek,pk);this.cencKeyIds.push.apply(this.cencKeyIds,lk);this.systemIds.push(kk);ek.a!=gk+hk&&bc(ek,hk-(ek.a-gk));}}}}catch(fk){}}var dc={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function ec(){var ek,fk,gk=new Promise(function(hk,ik){ek=hk;fk=ik;});gk.resolve=ek;gk.reject=fk;gk.destroy=ec.prototype.destroy;return gk;}ec.prototype.destroy=function(){this.catch(function(){});var ek=Error("Destroyed!");ek.type="destroy";this.reject(ek);};function fc(){this.g=new ec();this.f=false;this.a=null;this.b=[];this.c=null;}function gc(ek,fk){if(ek.f)throw Error("Cannot append to a running task!");ek.b.push(fk);}fc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});hc(this,void 0);};fc.prototype.end=function(){this.b.splice(1);};function hc(ek,fk){var gk=ek.b[0](fk),hk;gk?(hk=gk[0],ek.c=gk[1]):(hk=Promise.resolve(),ek.c=null);hk.then(ab(ek,function(ik){this.a?(this.b=[],this.c=null,ic(this)):(this.b.shift(),this.b.length?hc(this,ik):(this.g.resolve(ik),this.c=null));})).catch(ab(ek,function(ik){this.b=[];this.c=null;this.a?ic(this):this.g.reject(ik);}));}function ic(ek){var fk=Error("Task aborted.");fk.type="aborted";ek.g.reject(fk);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(ek),5);}function jc(){this.a={};}jc.prototype.push=function(ek,fk){this.a.hasOwnProperty(ek)?this.a[ek].push(fk):this.a[ek]=[fk];};jc.prototype.get=function(ek){return (ek=this.a[ek])?ek.slice():null;};function kc(ek){var fk=[],gk;for(gk in ek.a)fk.push.apply(fk,ek.a[gk]);return fk;}function lc(ek,fk,gk){if(ek=ek.a[fk])for(fk=0;fk<ek.length;++fk)ek[fk]==gk&&(ek.splice(fk,1),--fk);}function mc(ek){var fk=[],gk;for(gk in ek.a)fk.push(gk);return fk;}function nc(){this.a=new jc();}nc.prototype.destroy=function(){pc(this);this.a=null;};function oc(ek,fk,gk,hk){fk=new qc(fk,gk,hk);ek.a.push(gk,fk);}nc.prototype.ba=function(ek,fk){for(var gk=this.a.get(fk)||[],hk=0;hk<gk.length;++hk){var ik=gk[hk];ik.target==ek&&(ik.ba(),lc(this.a,fk,ik));}};function pc(ek){for(var fk=kc(ek.a),gk=0;gk<fk.length;++gk)fk[gk].ba();ek.a.a={};}function qc(ek,fk,gk){this.target=ek;this.type=fk;this.a=gk;this.target.addEventListener(fk,gk,false);}qc.prototype.ba=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function rc(ek,fk,gk){MediaSource.isTypeSupported(fk);fk=ek.addSourceBuffer(fk);this.j=ek;this.c=fk;this.l=gk;this.h=new nc();this.b=[];this.o=0;this.f=this.a=null;this.s=0;oc(this.h,this.c,"updateend",this.u.bind(this));}var sc=1/60;rc.prototype.destroy=function(){yc(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.h.destroy();this.j=this.c=this.h=null;};function tc(ek,fk){for(var gk=ek.c.buffered,hk=0;hk<gk.length;++hk){var ik=gk.start(hk)-sc,jk=gk.end(hk)+sc;if(fk>=ik&&fk<=jk)return gk.end(hk)-fk;}return 0;}function uc(ek,fk){var gk=fk.a?fk.a-fk.b:1,hk=new cg();hk.a=3;hk.g=1000*gk;hk.c=1000*ek.s;return hk;}function vc(ek,fk,gk,hk){if(ek.a)return ek=Error("Cannot fetch ("+ek.i+"): previous operation not complete."),ek.type="stream",Promise.reject(ek);ek.a=new fc();gk!=ek.c.timestampOffset&&(ek.c.timestampOffset=gk);gk=uc(ek,fk);var ik=jg(fk.url,gk,ek.l),jk=hg.prototype.f.bind(fk.url),kk=0;hk&&gc(ek.a,function(){return [hk.then(function(nk){nk.W>kk&&(kk=nk.W);return ad(this,nk);}.bind(this)),this.g.bind(this)];}.bind(ek));gc(ek.a,ab(ek,function(){return [ik.then(function(nk){nk.W>kk&&(kk=nk.W);this.l.getBandwidth();return ad(this,nk);}.bind(this)),function(){jk();this.g();}.bind(this)];}));var lk=0==ek.c.buffered.length&&0==ek.b.length,mk=null;gc(ek.a,function(){if(0==this.c.buffered.length){var nk=Error("Failed to buffer segment ("+this.i+").");nk.type="stream";return [Promise.reject(nk)];}lk&&(nk=fk.b,mk=this.c.buffered.start(0)-nk);nk=rg(this.b,fk.b);0<=nk?this.b.splice(nk+1,0,fk):this.b.push(fk);}.bind(ek));return zc(ek).then(function(){return Promise.resolve({pa:mk,Ka:kk});}.bind(ek));}function wc(ek){if(ek.a)return ek=Error("Cannot clear ("+ek.i+"): previous operation not complete."),ek.type="stream",Promise.reject(ek);ek.a=new fc();gc(ek.a,function(){var fk;fk:if(0==this.c.buffered.length){fk=Promise.resolve();}else{try{this.c.remove(0,Number.POSITIVE_INFINITY);}catch(gk){fk=Promise.reject(gk);break fk;}this.b=[];fk=this.f=new ec();};return [fk,this.g.bind(this)];}.bind(ek));return zc(ek);}function xc(ek,fk){if(ek.a){var gk=Error("Cannot clearAfter ("+ek.i+"): previous operation not complete.");gk.type="stream";return Promise.reject(gk);}ek.a=new fc();gc(ek.a,function(){return [bd(this,fk),this.g.bind(this)];}.bind(ek));return zc(ek);}function yc(ek){ek.a?(ek=ek.a,ek.a?ek=ek.a:ek.f?(ek.c&&ek.c(),ek.a=new ec(),ek=ek.a):(ek.f=true,ek=Promise.resolve())):ek=Promise.resolve();return ek;}function zc(ek){ek.a.start();return ek.a.g.then(ab(ek,function(){this.a=null;})).catch(ab(ek,function(fk){this.a=null;return Promise.reject(fk);}));}function ad(ek,fk){try{ek.c.appendBuffer(fk);}catch(gk){return Promise.reject(gk);}ek.f=new ec();return ek.f;}function bd(ek,fk){if(0==ek.c.buffered.length)return Promise.resolve();var gk=rg(ek.b,fk);if(-1==gk||gk==ek.b.length-1)return Promise.resolve();try{ek.c.remove(ek.b[gk+1].b,Number.POSITIVE_INFINITY);}catch(hk){return Promise.reject(hk);}ek.b=ek.b.slice(0,gk+1);ek.f=new ec();return ek.f;}rc.prototype.g=function(){"open"==this.j.readyState&&this.c.abort();};rc.prototype.u=function(){this.f.resolve();this.f=null;};function cd(ek){this.qa=new jc();this.s=ek;}l("shaka.util.FakeEventTarget",cd);cd.prototype.addEventListener=function(ek,fk,gk){gk||this.qa.push(ek,fk);};cd.prototype.removeEventListener=function(ek,fk,gk){gk||lc(this.qa,ek,fk);};cd.prototype.dispatchEvent=function(ek){delete ek.srcElement;delete ek.target;delete ek.currentTarget;Object.defineProperties(ek,{srcElement:{value:null,writable:true},target:{value:this,writable:true},currentTarget:{value:null,writable:true}});return dd(this,ek);};function dd(ek,fk){fk.currentTarget=ek;for(var gk=ek.qa.get(fk.type)||[],hk=0;hk<gk.length;++hk){var ik=gk[hk];try{ik.handleEvent?ik.handleEvent(fk):ik.call(ek,fk);}catch(jk){}}ek.s&&fk.bubbles&&dd(ek.s,fk);return fk.defaultPrevented;}function ed(ek,fk){try{var hk=new gd(ek,fk);return Promise.resolve(hk);}catch(gk){return Promise.reject(gk);}}function fd(ek){var fk=this.mediaKeys;fk&&fk!=ek&&id(fk,null);delete this.mediaKeys;(this.mediaKeys=ek)&&id(ek,this);return Promise.resolve();}function gd(ek,fk){this.a=this.keySystem=ek;var gk=true;"org.w3.clearkey"==ek&&(this.a="webkit-org.w3.clearkey",gk=false);var hk=false,ik;ik=document.getElementsByTagName("video");ik=ik.length?ik[0]:document.createElement("video");for(var jk=0;jk<fk.length;++jk){var kk=fk[jk],lk={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:kk.initDataTypes,sessionTypes:["temporary"]},mk=false;if(kk.audioCapabilities)for(var nk=0;nk<kk.audioCapabilities.length;++nk){var ok=kk.audioCapabilities[nk];ok.contentType&&(mk=true,ik.canPlayType(ok.contentType.split(";")[0],this.a)&&(lk.audioCapabilities.push(ok),hk=true));}if(kk.videoCapabilities)for(nk=0;nk<kk.videoCapabilities.length;++nk)ok=kk.videoCapabilities[nk],ok.contentType&&(mk=true,ik.canPlayType(ok.contentType,this.a)&&(lk.videoCapabilities.push(ok),hk=true));mk||(hk=ik.canPlayType("video/mp4",this.a)||ik.canPlayType("video/webm",this.a));"required"==kk.persistentState&&(gk?(lk.persistentState="required",lk.sessionTypes=["persistent-license"]):hk=false);if(hk){this.b=lk;return;}}throw Error("None of the requested configurations were supported.");}gd.prototype.createMediaKeys=function(){var ek=new hd(this.a);return Promise.resolve(ek);};gd.prototype.getConfiguration=function(){return this.b;};function hd(ek){this.g=ek;this.b=null;this.a=new nc();this.c=[];this.f={};}function id(ek,fk){ek.b=fk;pc(ek.a);fk&&(oc(ek.a,fk,"webkitneedkey",ek.cb.bind(ek)),oc(ek.a,fk,"webkitkeymessage",ek.bb.bind(ek)),oc(ek.a,fk,"webkitkeyadded",ek.$a.bind(ek)),oc(ek.a,fk,"webkitkeyerror",ek.ab.bind(ek)));}j=hd.prototype;j.createSession=function(ek){var fk=ek||"temporary";if("temporary"!=fk&&"persistent-license"!=fk)throw new TypeError("Session type "+ek+" is unsupported on this platform.");ek=this.b||document.createElement("video");ek.src||(ek.src="about:blank");fk=new kd(ek,this.g,fk);this.c.push(fk);return fk;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.cb=function(ek){ek=qa({type:"encrypted",initDataType:"webm",initData:ek.initData});this.b.dispatchEvent(ek);};j.bb=function(ek){var fk=jd(this,ek.sessionId);fk&&(ek=qa({type:"message",messageType:void 0==fk.keyStatuses.a?"licenserequest":"licenserenewal",message:ek.message}),fk.b&&(fk.b.resolve(),fk.b=null),fk.dispatchEvent(ek));};j.$a=function(ek){if(ek=jd(this,ek.sessionId))md(ek,"usable"),ek.a&&ek.a.resolve(),ek.a=null;};j.ab=function(ek){var fk=jd(this,ek.sessionId);if(fk){var gk=Error("EME v0.1b key error");gk.errorCode=ek.errorCode;gk.errorCode.systemCode=ek.systemCode;!ek.sessionId&&fk.b?(gk.method="generateRequest",45==ek.systemCode&&(gk.message="Unsupported session type."),fk.b.reject(gk),fk.b=null):ek.sessionId&&fk.a?(gk.method="update",fk.a.reject(gk),fk.a=null):(gk=ek.systemCode,ek.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?md(fk,"output-restricted"):1==gk?md(fk,"expired"):md(fk,"internal-error"));}};function jd(ek,fk){var gk=ek.f[fk];return gk?gk:(gk=ek.c.shift())?(gk.sessionId=fk,ek.f[fk]=gk):null;}function kd(ek,fk,gk){cd.call(this,null);this.f=ek;this.h=false;this.a=this.b=null;this.c=fk;this.g=gk;this.sessionId="";this.expiration=NaN;this.closed=new ec();this.keyStatuses=new od();}m(kd,cd);function ld(ek,fk,gk){if(ek.h)return Promise.reject(Error("The session is already initialized."));ek.h=true;var hk;try{if("persistent-license"==ek.g){if(gk){hk=kb("LOAD_SESSION|"+gk);}else{var jk=new Uint8Array(fk);hk=kb("PERSISTENT|"+jb(jk));}}else hk=new Uint8Array(fk);}catch(ik){return Promise.reject(ik);}ek.b=new ec();try{ek.f.webkitGenerateKeyRequest(ek.c,hk);}catch(kk){if("InvalidStateError"!=kk.name)return ek.b=null,Promise.reject(kk);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,hk);}catch(lk){this.b.reject(lk),this.b=null;}}.bind(ek),10);}return ek.b;}j=kd.prototype;j.wa=function(ek,fk){if(this.a){this.a.then(this.wa.bind(this,ek,fk)).catch(this.wa.bind(this,ek,fk));}else{this.a=ek;var gk,hk;"webkit-org.w3.clearkey"==this.c?(gk=jb(new Uint8Array(fk)),hk=JSON.parse(gk),"oct"!=hk.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),gk=lb(hk.keys[0].k),hk=lb(hk.keys[0].kid)):(gk=new Uint8Array(fk),hk=null);try{this.f.webkitAddKey(this.c,gk,hk,this.sessionId);}catch(ik){this.a.reject(ik),this.a=null;}}};function md(ek,fk){var gk=ek.keyStatuses;gk.size=void 0==fk?0:1;gk.a=fk;gk=qa({type:"keystatuseschange"});ek.dispatchEvent(gk);}j.generateRequest=function(ek,fk){return ld(this,fk,null);};j.load=function(ek){return "persistent-license"==this.g?ld(this,null,ek):Promise.reject(Error("Not a persistent session."));};j.update=function(ek){var fk=new ec();this.wa(fk,ek);return fk;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function nd(ek){this.b=ek;this.a=0;}nd.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:true}:{value:this.b[this.a++],done:false};};function od(){this.size=0;this.a=void 0;}var pd;j=od.prototype;j.entries=function(){var ek=pd,fk=[];this.a&&fk.push([ek,this.a]);return new nd(fk);};j.forEach=function(ek){this.a&&ek(this.a);};j.get=function(ek){if(this.has(ek))return this.a;};j.has=function(ek){var fk=pd;return this.a&&nb(new Uint8Array(ek),fk)?true:false;};j.keys=function(){var ek=pd,fk=[];this.a&&fk.push(ek);return new nd(fk);};j.values=function(){var ek=[];this.a&&ek.push(this.a);return new nd(ek);};function qd(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(pd=new Uint8Array([0]),Navigator.prototype.requestMediaKeySystemAccess=ed,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=fd,i.MediaKeys=hd,i.MediaKeySystemAccess=gd):(Navigator.prototype.requestMediaKeySystemAccess=ha,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ia,i.MediaKeys=ja,i.MediaKeySystemAccess=ka));}l("shaka.polyfill.MediaKeys.install",qd);l("shaka.polyfill.installAll",function(){w();s();qd();u();});function rd(){cd.call(this,null);this.a=new sa(3);this.g=new sa(10);this.f=0;}m(rd,cd);l("shaka.util.EWMABandwidthEstimator",rd);rd.prototype.sample=function(ek,fk){if(!(65536>fk)){ek=Math.max(ek,50);var gk=8000*fk/ek,hk=ek/1000;this.a.sample(hk,gk);this.g.sample(hk,gk);this.dispatchEvent(qa({type:"bandwidth"}));this.f=Date.now();}};rd.prototype.getBandwidth=function(){return .5>this.a.a?500000:Math.min(ta(this.a),ta(this.g));};rd.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};rd.prototype.supportsCaching=function(){return false;};function sd(ek,fk){rd.call(this);this.c=ek||0;this.b=void 0===fk?Infinity:fk;}m(sd,rd);l("shaka.util.EWMACacheBandwidthEstimator",sd);sd.prototype.sample=function(ek,fk){ek<=this.c&&8000*fk/ek>this.b||rd.prototype.sample.call(this,ek,fk);};sd.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function td(){rd.call(this);}m(td,rd);l("shaka.util.EWMASignedURLBandwidthEstimator",td);td.prototype.supportsCaching=function(){return true;};function ud(ek){return Object.keys(ek).map(function(fk){return ek[fk];});}function vd(ek,fk){var gk=xd(ek,fk,"number");if(null==gk)return null;if(isNaN(gk)||gk==Number.NEGATIVE_INFINITY||gk==Number.POSITIVE_INFINITY)throw new RangeError("'"+fk+"' must be finite.");if(0>gk)throw new RangeError("'"+fk+"' must be >= 0");return gk;}function wd(ek,fk){return xd(ek,fk,"string");}function xd(ek,fk,gk){ek=ek[fk];if(null==ek)return null;if(typeof ek!=gk)throw new TypeError("'"+fk+"' must be a "+gk+".");return ek;}function yd(ek,fk,gk){ek=ek[fk];if(null==ek)return null;if(!(ek instanceof gk))throw new TypeError("'"+fk+"' must be an instance of "+gk.name+".");return ek;}var zd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ae(ek){var fk;ek instanceof ae?(be(this,ek.K),this.O=ek.O,this.J=ek.J,ce(this,ek.V),this.H=ek.H,de(this,ek.a.clone()),this.N=ek.N):ek&&(fk=String(ek).match(zd))?(be(this,fk[1]||"",true),this.O=ee(fk[2]||""),this.J=ee(fk[3]||"",true),ce(this,fk[4]),this.H=ee(fk[5]||"",true),de(this,fk[6]||"",true),this.N=ee(fk[7]||"")):this.a=new me(null);}j=ae.prototype;j.K="";j.O="";j.J="";j.V=null;j.H="";j.N="";j.toString=function(){var ek=[],fk=this.K;fk&&ek.push(fe(fk,he,true),":");if(fk=this.J){ek.push("//");var gk=this.O;gk&&ek.push(fe(gk,he,true),"@");ek.push(encodeURIComponent(fk).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));fk=this.V;null!=fk&&ek.push(":",String(fk));}if(fk=this.H)this.J&&"/"!=fk.charAt(0)&&ek.push("/"),ek.push(fe(fk,"/"==fk.charAt(0)?je:ie,true));(fk=this.a.toString())&&ek.push("?",fk);(fk=this.N)&&ek.push("#",fe(fk,le));return ek.join("");};j.resolve=function(ek){var fk=this.clone();"data"===fk.K&&(fk=new ae());var gk=!!ek.K;gk?be(fk,ek.K):gk=!!ek.O;gk?fk.O=ek.O:gk=!!ek.J;gk?fk.J=ek.J:gk=null!=ek.V;var hk=ek.H;if(gk){ce(fk,ek.V);}else if(gk=!!ek.H){if("/"!=hk.charAt(0))if(this.J&&!this.H){hk="/"+hk;}else{var ik=fk.H.lastIndexOf("/");-1!=ik&&(hk=fk.H.substr(0,ik+1)+hk);}if(".."==hk||"."==hk){hk="";}else if(-1!=hk.indexOf("./")||-1!=hk.indexOf("/.")){for(var ik=0==hk.lastIndexOf("/",0),hk=hk.split("/"),jk=[],kk=0;kk<hk.length;){var lk=hk[kk++];"."==lk?ik&&kk==hk.length&&jk.push(""):".."==lk?((1<jk.length||1==jk.length&&""!=jk[0])&&jk.pop(),ik&&kk==hk.length&&jk.push("")):(jk.push(lk),ik=true);}hk=jk.join("/");}}gk?fk.H=hk:gk=""!==ek.a.toString();gk?de(fk,ek.a.clone()):gk=!!ek.N;gk&&(fk.N=ek.N);return fk;};j.clone=function(){return new ae(this);};function be(ek,fk,gk){ek.K=gk?ee(fk,true):fk;ek.K&&(ek.K=ek.K.replace(/:$/,""));}function ce(ek,fk){if(fk){fk=Number(fk);if(isNaN(fk)||0>fk)throw Error("Bad port number "+fk);ek.V=fk;}else ek.V=null;}function de(ek,fk,gk){fk instanceof me?ek.a=fk:(gk||(fk=fe(fk,ke)),ek.a=new me(fk));}function ee(ek,fk){return ek?fk?decodeURI(ek):decodeURIComponent(ek):"";}function fe(ek,fk,gk){return "string"==typeof ek?(ek=encodeURI(ek).replace(fk,ge),gk&&(ek=ek.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ek):null;}function ge(ek){ek=ek.charCodeAt(0);return "%"+(ek>>4&15).toString(16)+(ek&15).toString(16);}var he=/[#\/\?@]/g,ie=/[\#\?:]/g,je=/[\#\?]/g,ke=/[\#\?@]/g,le=/#/g;function me(ek){this.b=ek||null;}me.prototype.a=null;me.prototype.c=null;function ne(ek,fk,gk){if(!ek.a&&(ek.a={},ek.c=0,ek.b))for(var hk=ek.b.split("&"),ik=0;ik<hk.length;ik++){var jk=hk[ik].indexOf("="),kk=null,lk=null;0<=jk?(kk=hk[ik].substring(0,jk),lk=hk[ik].substring(jk+1)):kk=hk[ik];kk=decodeURIComponent(kk.replace(/\+/g," "));lk=lk||"";ne(ek,kk,decodeURIComponent(lk.replace(/\+/g," ")));}ek.b=null;(hk=ek.a.hasOwnProperty(fk)&&ek.a[fk])||(ek.a[fk]=hk=[]);hk.push(gk);ek.c++;}me.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var ek=[],fk;for(fk in this.a)for(var gk=encodeURIComponent(fk),hk=this.a[fk],ik=0;ik<hk.length;ik++){var jk=gk;""!==hk[ik]&&(jk+="="+encodeURIComponent(hk[ik]));ek.push(jk);}return this.b=ek.join("&");};me.prototype.clone=function(){var ek=new me();ek.b=this.b;if(this.a){var fk={},gk;for(gk in this.a)fk[gk]=this.a[gk].concat();ek.a=fk;ek.c=this.c;}return ek;};function oe(ek,fk){var gk=(new DOMParser()).parseFromString(ek,"text/xml");if(!gk)return null;fk||(fk=[new ae("")]);return nf({m:fk},gk,pe);}l("shaka.dash.mpd.parseMpd",oe);function pe(){this.id=this.url=null;this.type="static";this.b=this.j=this.m=null;this.g=5;this.i=this.c=this.f=null;this.h=1;this.a=[];}function qe(){this.g=this.f=this.c=this.m=this.a=this.start=this.id=null;this.b=[];}function re(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.m=null;this.j=[];this.a=[];}function se(){this.value=null;}function te(){this.contentType=this.lang=this.id=null;}function ue(){this.a=this.b=this.g=this.m=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function ve(){this.value=this.schemeIdUri=this.b=null;this.children=[];this.a=this.pssh=null;}function we(){this.parsedPssh=this.psshBox=null;}function xe(){this.url=null;}function ye(){this.url=null;}function ze(){this.m=null;this.g=1;this.c=this.b=this.a=this.f=null;}ze.prototype.clone=function(){var ek=new ze();ek.m=rf(this.m);ek.g=this.g;ek.f=this.f;ek.a=sf(this.a);ek.b=sf(this.b);ek.c=sf(this.c);return ek;};function af(){this.a=this.url=null;}af.prototype.clone=function(){var ek=new af();ek.url=rf(this.url);ek.a=sf(this.a);return ek;};function bf(){this.a=this.url=null;}bf.prototype.clone=function(){var ek=new bf();ek.url=rf(this.url);ek.a=sf(this.a);return ek;};function cf(){this.m=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}cf.prototype.clone=function(){var ek=new cf();ek.m=rf(this.m);ek.a=this.a;ek.g=this.g;ek.c=this.c;ek.i=this.i;ek.h=sf(this.h);ek.b=rf(this.b)||[];ek.f=sf(this.f);return ek;};function df(){this.a=this.b=null;}df.prototype.clone=function(){var ek=new df();ek.b=rf(this.b);ek.a=sf(this.a);return ek;};function ef(){this.b=1;this.a=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}ef.prototype.clone=function(){var ek=new ef();ek.b=this.b;ek.i=this.i;ek.a=this.a;ek.j=this.j;ek.h=this.h;ek.f=this.f;ek.g=this.g;ek.c=sf(this.c);return ek;};function ff(){this.a=[];}ff.prototype.clone=function(){var ek=new ff();ek.a=rf(this.a)||[];return ek;};function gf(){this.c=this.a=this.b=null;}gf.prototype.clone=function(){var ek=new gf();ek.b=this.b;ek.a=this.a;ek.c=this.c;return ek;};function hf(ek,fk){this.aa=ek;this.end=fk;}hf.prototype.clone=function(){return new hf(this.aa,this.end);};pe.TAG_NAME="MPD";qe.TAG_NAME="Period";re.TAG_NAME="AdaptationSet";se.TAG_NAME="Role";te.TAG_NAME="ContentComponent";ue.TAG_NAME="Representation";ve.TAG_NAME="ContentProtection";we.TAG_NAME="cenc:pssh";xe.TAG_NAME="BaseURL";ye.TAG_NAME="Location";ze.TAG_NAME="SegmentBase";af.TAG_NAME="RepresentationIndex";bf.TAG_NAME="Initialization";cf.TAG_NAME="SegmentList";df.TAG_NAME="SegmentURL";ef.TAG_NAME="SegmentTemplate";ff.TAG_NAME="SegmentTimeline";gf.TAG_NAME="S";pe.prototype.parse=function(ek,fk){this.url=ek.m;this.id=tf(fk,"id",ag);this.type=tf(fk,"type",ag)||"static";this.b=tf(fk,"mediaPresentationDuration",vf);this.g=tf(fk,"minBufferTime",vf,this.g);this.f=tf(fk,"minimumUpdatePeriod",vf,this.f);this.c=tf(fk,"availabilityStartTime",uf,this.c);this.i=tf(fk,"timeShiftBufferDepth",vf,this.i);this.h=tf(fk,"suggestedPresentationDelay",vf,this.h);var gk=ek.m,hk=pf(this,fk,xe);this.m=kf(gk,hk);if(hk=nf(this,fk,ye))this.j=lf(gk,hk.url);this.a=pf(this,fk,qe);};qe.prototype.parse=function(ek,fk){this.id=tf(fk,"id",ag);this.start=tf(fk,"start",vf);this.a=tf(fk,"duration",vf);var gk=pf(this,fk,xe);this.m=kf(ek.m,gk);this.c=nf(this,fk,ze);this.f=nf(this,fk,cf);this.g=nf(this,fk,ef);this.b=pf(this,fk,re);jf(this);};function jf(ek){for(var fk=[],gk=0;gk<ek.b.length;++gk){var hk=ek.b[gk];null!=hk.group&&(fk[hk.group]=true);}for(gk=0;gk<ek.b.length;++gk)if(hk=ek.b[gk],null==hk.group){for(var ik=1;1==fk[ik];)++ik;fk[ik]=true;hk.group=ik;}}re.prototype.parse=function(ek,fk){var gk=nf(this,fk,te)||{},hk=nf(this,fk,se);this.id=tf(fk,"id",ag);this.group=tf(fk,"group",zf);this.lang=tf(fk,"lang",ag,gk.lang);this.contentType=tf(fk,"contentType",ag,gk.contentType);this.width=tf(fk,"width",yf);this.height=tf(fk,"height",yf);this.b=tf(fk,"mimeType",ag);this.i=tf(fk,"codecs",ag);this.c=hk&&"main"==hk.value;this.lang&&(this.lang=fb(this.lang));gk=pf(this,fk,xe);this.m=kf(ek.m,gk);this.j=pf(this,fk,ve);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=ek.c?mf(this,fk,ek.c):nf(this,fk,ze);this.g=ek.f?mf(this,fk,ek.f):nf(this,fk,cf);this.h=ek.g?mf(this,fk,ek.g):nf(this,fk,ef);this.a=pf(this,fk,ue);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};se.prototype.parse=function(ek,fk){this.value=tf(fk,"value",ag);};te.prototype.parse=function(ek,fk){this.id=tf(fk,"id",ag);this.lang=tf(fk,"lang",ag);this.contentType=tf(fk,"contentType",ag);this.lang&&(this.lang=fb(this.lang));};ue.prototype.parse=function(ek,fk){this.id=tf(fk,"id",ag);this.bandwidth=tf(fk,"bandwidth",yf);this.width=tf(fk,"width",yf,ek.width);this.height=tf(fk,"height",yf,ek.height);this.f=tf(fk,"mimeType",ag,ek.b);this.h=tf(fk,"codecs",ag,ek.i);this.lang=ek.lang;var gk=pf(this,fk,xe);this.m=kf(ek.m,gk);this.c=pf(this,fk,ve);this.g=ek.f?mf(this,fk,ek.f):nf(this,fk,ze);this.b=ek.g?mf(this,fk,ek.g):nf(this,fk,cf);this.a=ek.h?mf(this,fk,ek.h):nf(this,fk,ef);0==this.c.length&&(this.c=ek.j);};ve.prototype.parse=function(ek,fk){this.b=fk;this.schemeIdUri=tf(fk,"schemeIdUri",ag);this.value=tf(fk,"value",ag);var gk=tf(fk,"cenc:default_KID",ag);gk&&(this.a=gk.replace(/[-]/g,""));this.pssh=nf(this,fk,we);this.children=Array.prototype.slice.call(fk.childNodes);};we.prototype.parse=function(ek,fk){var gk=qf(fk);if(gk){this.psshBox=lb(gk);try{this.parsedPssh=new cc(this.psshBox);}catch(hk){if(!(hk instanceof RangeError))throw hk;}}};xe.prototype.parse=function(ek,fk){this.url=qf(fk);};ye.prototype.parse=function(ek,fk){this.url=qf(fk);};ze.prototype.parse=function(ek,fk){this.m=ek.m||this.m;this.g=tf(fk,"timescale",yf,this.g);this.f=tf(fk,"presentationTimeOffset",zf,this.f);this.a=tf(fk,"indexRange",wf,this.a);this.b=nf(this,fk,af)||this.b;this.c=nf(this,fk,bf)||this.c;};af.prototype.parse=function(ek,fk){var gk=tf(fk,"sourceURL",ag);this.url=lf(ek.m,gk);this.a=tf(fk,"range",wf,sf(ek.a));};bf.prototype.parse=function(ek,fk){var gk=tf(fk,"sourceURL",ag);this.url=lf(ek.m,gk);this.a=tf(fk,"range",wf);};cf.prototype.parse=function(ek,fk){this.m=ek.m||this.m;this.a=tf(fk,"timescale",yf,this.a);this.g=tf(fk,"presentationTimeOffset",zf,this.g);this.c=tf(fk,"duration",yf,this.c);this.i=tf(fk,"startNumber",zf,this.i);this.h=nf(this,fk,bf)||this.h;var gk=pf(this,fk,df);this.b=gk&&0<gk.length?gk:this.b;this.f=nf(this,fk,ff)||this.f;};df.prototype.parse=function(ek,fk){var gk=tf(fk,"media",ag);this.b=lf(ek.m,gk);this.a=tf(fk,"mediaRange",wf);};ef.prototype.parse=function(ek,fk){this.b=tf(fk,"timescale",yf,this.b);this.i=tf(fk,"presentationTimeOffset",zf,this.i);this.a=tf(fk,"duration",yf,this.a);this.j=tf(fk,"startNumber",zf,this.j);this.h=tf(fk,"media",ag,this.h);this.f=tf(fk,"index",ag,this.f);this.g=tf(fk,"initialization",ag,this.g);this.c=nf(this,fk,ff)||this.c;};ff.prototype.parse=function(ek,fk){this.a=pf(this,fk,gf);};gf.prototype.parse=function(ek,fk){this.b=tf(fk,"t",zf);this.a=tf(fk,"d",zf);this.c=tf(fk,"r",xf);};function kf(ek,fk){if(!fk||0===fk.length)return ek;for(var gk=[],hk=0;hk<fk.length;hk++){var ik=fk[hk].url;null==ek||0===ek.length?gk.push(new ae(ik)):(ik=lf(ek.slice(0,1),ik),gk.push(ik[0]));}return gk;}function lf(ek,fk){if(!fk)return ek;var gk=new ae(fk);return ek?ek.map(function(hk){return hk.resolve(gk);}):[gk];}function mf(ek,fk,gk){var hk=sf(gk);(fk=of(fk,gk.constructor.TAG_NAME))&&hk.parse(ek,fk);return hk;}function nf(ek,fk,gk){var hk=null;if(fk=of(fk,gk.TAG_NAME))hk=new gk(),hk.parse(ek,fk);return hk;}function of(ek,fk){for(var gk=null,hk=0;hk<ek.childNodes.length;hk++)if(ek.childNodes[hk].tagName==fk){if(gk)return null;gk=ek.childNodes[hk];}return gk;}function pf(ek,fk,gk){for(var hk=[],ik=0;ik<fk.childNodes.length;ik++)if(fk.childNodes[ik].tagName==gk.TAG_NAME){var jk=new gk();jk.parse.call(jk,ek,fk.childNodes[ik]);hk.push(jk);}return hk;}function qf(ek){ek=ek.firstChild;return ek.nodeType!=Node.TEXT_NODE?null:ek.nodeValue;}function rf(ek){return ek?ek.map(function(fk){return fk.clone();}):null;}function sf(ek){return ek?ek.clone():null;}function tf(ek,fk,gk,hk){ek=gk(ek.getAttribute(fk));return null!=ek?ek:void 0!==hk?hk:null;}function uf(ek){if(!ek)return null;ek=Date.parse(ek);return isNaN(ek)?null:Math.floor(ek/1000);}function vf(ek){if(!ek)return null;var fk=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(ek);if(!fk)return null;ek=0;var gk=zf(fk[1]);gk&&(ek+=31536000*gk);(gk=zf(fk[2]))&&(ek+=2592000*gk);(gk=zf(fk[3]))&&(ek+=86400*gk);(gk=zf(fk[4]))&&(ek+=3600*gk);(gk=zf(fk[5]))&&(ek+=60*gk);fk=i.parseFloat(fk[6]);(fk=isNaN(fk)?null:fk)&&(ek+=fk);return ek;}function wf(ek){var fk=/([0-9]+)-([0-9]+)/.exec(ek);if(!fk)return null;ek=zf(fk[1]);if(null==ek)return null;fk=zf(fk[2]);return null==fk?null:new hf(ek,fk);}function xf(ek){ek=i.parseInt(ek,10);return isNaN(ek)?null:ek;}function yf(ek){ek=i.parseInt(ek,10);return 0<ek?ek:null;}function zf(ek){ek=i.parseInt(ek,10);return 0<=ek?ek:null;}function ag(ek){return ek;}function bg(ek,fk){this.url=ek;this.b=fk||new cg();this.g=this.i=this.h=0;this.a=null;this.c=new ec();this.f=null;}function cg(){this.body=null;this.a=1;this.g=1000;this.c=0;this.method="GET";this.f="arraybuffer";this.b={};this.i=this.h=false;}function dg(ek){eg(ek);ek.b.body=null;ek.c.destroy();ek.c=null;ek.f=null;}function eg(ek){ek.a&&(ek.a.onload=null,ek.a.onreadystatechange=null,ek.a.onerror=null,ek.a.ontimeout=null);ek.a=null;}j=bg.prototype;j.Fa=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var ek=this.url.split(":")[1].split(";").pop().split(","),fk=ek.pop(),fk="base64"==ek.pop()?i.atob(fk.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(fk);"arraybuffer"==this.b.f&&(fk=kb(fk).buffer);ek=JSON.parse(JSON.stringify(new XMLHttpRequest()));ek.response=fk;ek.responseText=fk.toString();fk=this.c;fk.resolve(ek);dg(this);return fk;}if(0==this.url.lastIndexOf("idb:",0))return this.j();this.h++;this.i=Date.now();this.g||(this.g=this.b.g);this.a=new XMLHttpRequest();ek=this.url;this.f&&!this.f.supportsCaching()&&(ek=new ae(ek),ne(ek.a,"_",Date.now()),ek=ek.toString());this.a.open(this.b.method,ek,true);this.a.responseType=this.b.f;this.a.timeout=this.b.c;this.a.withCredentials=this.b.h;this.a.onload=this.Oa.bind(this);this.a.onreadystatechange=this.Sa.bind(this);this.a.onerror=this.jb.bind(this);this.a.ontimeout=this.Xa.bind(this);for(fk in this.b.b)this.a.setRequestHeader(fk,this.b.b[fk]);this.a.send(this.b.body);return this.c;};function fg(ek,fk,gk){fk=Error(fk);fk.type=gk;fk.status=ek.a.status;fk.url=ek.url;fk.method=ek.b.method;fk.body=ek.b.body;fk.mb=ek.a;return fk;}j.Oa=function(ek){this.f&&this.f.sample(Date.now()-this.i,ek.loaded);ek=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),dg(this)):this.h<this.b.a&&-1===ek.indexOf(this.a.status)?gg(this):(ek=fg(this,"HTTP error.","net"),this.c.reject(ek),dg(this));};j.Sa=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.W=Date.now()-this.i,this.b.i)){var ek=Date.parse(this.a.getResponseHeader("Date"));ek&&(hb=ek-Date.now());}};j.jb=function(){var ek=fg(this,"Network failure.","net");this.c.reject(ek);dg(this);};j.Xa=function(){if(this.h<this.b.a){gg(this);}else{var ek=fg(this,"Request timed out.","net");this.c.reject(ek);dg(this);}};function gg(ek){eg(ek);i.setTimeout(ek.Fa.bind(ek),ek.g*(1+.5*(2*Math.random()-1)));ek.g*=2;}function hg(ek,fk,gk,hk){this.c=fk;this.h=gk||0;this.g=null!=hk?hk:null;this.b=this.a=null;this.i=ek;}function ig(ek,fk){return ek&&0!==ek.length?ek.map(function(gk){return gk.resolve(fk);}):[fk];}function jg(ek,fk,gk){if(ek.a)return ek.a;fk=fk||new cg();if(ek.h||ek.g)fk.b.Range="bytes="+(ek.h+"-"+(null!=ek.g?ek.g:""));ek.a=kg(ek,0,fk,gk);return ek.a;}hg.prototype.f=function(){if(this.b){this.a=null;var ek=this.b;if(ek.a&&ek.a.readyState!=XMLHttpRequest.DONE){ek.a.abort();var fk=fg(ek,"Request aborted.","aborted");ek.c.reject(fk);dg(ek);}this.b=null;}};function kg(ek,fk,gk,hk){var ik=ek.c[fk].toString();ek.i&&(ik=ek.i(ik,gk.b)||ik);ek.b=new bg(ik,gk);hk&&(ek.b.f=hk);ik=ek.b.Fa().then(ab(ek,function(jk){this.b=this.a=null;jk.response.W=jk.W;return Promise.resolve(jk.response);}));return ik=ik.catch(ab(ek,function(jk){if(this.a&&fk+1<this.c.length)return this.a=kg(this,fk+1,gk,hk);this.a=this.b=null;return Promise.reject(jk);}));}hg.prototype.clone=function(){return new hg(this.i,this.c.map(function(ek){return ek.clone();}),this.h,this.g);};hg.prototype.toString=function(){return this.c[0].toString();};function lg(ek,fk){this.a=new cg();this.a.f="text";this.a.a=3;this.a.c=1000*(null!=fk?fk:0);this.a.i=true;this.b=ek;}function mg(ek){var fk=ek.b;return jg(fk,ek.a).then(function(gk){if(gk=oe(gk,fk.c))return Promise.resolve(gk);gk=Error("MPD parse failure.");gk.type="mpd";return Promise.reject(gk);});}function ng(ek,fk,gk,hk){if(!fk.a)return null;var ik=fk.a.h;if(!ik)return fk.m?new hg(ek,fk.m,0,null):null;gk=og(ik,fk.id,gk,fk.bandwidth,hk);if(!gk)return null;fk=ig(fk.m,gk);return new hg(ek,fk,0,null);}function og(ek,fk,gk,hk,ik){var jk={RepresentationID:fk,Number:gk,Bandwidth:hk,Time:ik};ek=ek.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(lk,mk,nk){if("$$"==lk)return "$";var ok=jk[mk];if(null==ok)return lk;"RepresentationID"==mk&&nk&&(nk=void 0);lk=ok.toString();nk=i.parseInt(nk,10)||1;nk=Math.max(0,nk-lk.length);return Array(nk+1).join("0")+lk;});try{return new ae(ek);}catch(kk){if(kk instanceof URIError)return null;throw kk;}}function pg(ek,fk,gk){var hk=0;fk*=gk;ek=ek.a;gk=[];for(var ik=0;ik<ek.length&&ek[ik].a;++ik){var jk=ek[ik].b,jk=null!=jk?jk:hk,kk=ek[ik].c||0;0>kk&&(kk=ek[ik].a,kk=ik+1===ek.length?Math.ceil((ek[0].b+fk-jk)/kk)-1:Math.ceil((ek[ik+1].b-jk)/kk)-1);0<gk.length&&jk!=hk&&(gk[gk.length-1].end=jk);for(var lk=0;lk<=kk;++lk)hk=jk+ek[ik].a,gk.push({start:jk,end:hk}),jk=hk;}return gk;}function qg(ek,fk,gk){this.b=ek;this.a=fk;this.url=gk;}function rg(ek,fk){for(var gk=ek.length-1;0<=gk;--gk){var hk=ek[gk];if(fk>=hk.b&&(null==hk.a||fk<hk.a))return gk;}return -1;}function sg(ek,fk){return ek.map(function(gk){return new qg(gk.b+fk,null!=gk.a?gk.a+fk:null,gk.url);});}function tg(){}tg.prototype.parse=function(ek,fk,gk,hk){var ik=null;try{var kk,lk=new ua(fk);if(440786851!=wa(lk).id){kk=null;}else{var mk=wa(lk);if(408125543!=mk.id){kk=null;}else{var nk=mk.a.byteOffset,ok,pk=new ua(mk.a);for(fk=null;wb(pk.a);){var qk=wa(pk);if(357149030==qk.id){fk=qk;break;}}if(fk){for(var rk=new ua(fk.a),pk=1e+06;wb(rk.a);){var sk=wa(rk);if(2807729==sk.id){pk=za(sk);break;}}ok=pk/1e+09;}else ok=null;kk=ok?{fb:nk,kb:ok}:null;}}if(kk){var tk=wa(new ua(ek));if(475249515!=tk.id){ik=null;}else{var uk=kk.fb,vk=kk.kb;ek=[];var wk=new ua(tk.a);for(kk=tk=-1;wb(wk.a);){var xk=wa(wk);if(187==xk.id){var yk,zk=new ua(xk.a),al=wa(zk);if(179!=al.id){yk=null;}else{var bl=za(al),cl=wa(zk);if(183!=cl.id){yk=null;}else{for(var dl=new ua(cl.a),nk=0;wb(dl.a);){var el=wa(dl);if(241==el.id){nk=za(el);break;}}yk={lb:bl,eb:nk};}}if(yk){var fl=vk*yk.lb,gl=uk+yk.eb;if(0<=tk){var hl=new hg(hk,gk,kk,gl-1);ek.push(new qg(tk,fl,hl));}tk=fl;kk=gl;}}}0<=tk&&(hl=new hg(hk,gk,kk,null),ek.push(new qg(tk,null,hl)));ik=ek;}}else ik=null;}catch(jk){if(!(jk instanceof RangeError))throw jk;}return ik;};function ug(ek){this.a=ek;this.pa=0;}ug.prototype.destroy=function(){this.a=null;};ug.prototype.length=function(){return this.a.length;};function vg(ek){if(0==ek.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return ek.a[0];}function wg(ek){if(0==ek.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return ek.a[ek.a.length-1];}ug.prototype.get=function(ek){if(0>ek||ek>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[ek];};function xg(ek,fk){var gk=rg(ek.a,fk);return 0<=gk?ek.a[gk]:null;}function yg(ek,fk){var gk=fk-ek.pa;0!=gk&&(ek.a=sg(ek.a,gk),ek.pa=fk);}function zg(ek,fk,gk,hk,ik){this.b=fk;this.f=gk;this.a=null;this.c=ik;}zg.prototype.destroy=function(){this.c=this.f=this.b=null;this.a&&(this.a.destroy(),this.a=null);};zg.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ek=this.f.b,fk=[];ek.f&&(fk=pg(ek.f,ek.a||1,this.b.a||0));var gk=0;ek.c&&ek.i?gk=ek.c*ek.i:0<fk.length&&(gk=fk[0].start-(ek.g||0));var hk=gk,ik=ek.b.length;0<fk.length&&fk.length!=ek.b.length&&(ik=Math.min(fk.length,ek.b.length));for(var jk=[],kk=0;kk<ik;++kk){var lk=ek.b[kk],mk=gk/ek.a,nk=null,ok=null;ek.c?(nk=gk+ek.c,ok=nk/ek.a):0<fk.length?(nk=fk[kk].end-(ek.g||0),ok=nk/ek.a):(ok=mk+this.b.a,nk=ok*ek.a);var gk=nk,nk=0,pk=null;lk.a&&(nk=lk.a.aa,pk=lk.a.end);ok=Math.min(this.b.a+hk/ek.a,ok);jk.push(new qg(mk,ok,new hg(this.c,lk.b,nk,pk)));}this.a=new ug(jk);return Promise.resolve(this.a);};function ah(ek,fk,gk,hk,ik){this.f=fk;this.b=gk;this.a=null;this.c=ik;}ah.prototype.destroy=function(){this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};ah.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var ek=this.b.a,fk=pg(ek.c,ek.b||1,this.f.a||0),gk=[],hk=0;hk<fk.length;++hk){var ik=fk[hk].start,jk=ik/ek.b,kk=fk[hk].end/ek.b,ik=ng(this.c,this.b,hk+ek.j,ik);if(!ik)return ek=Error("Failed to generate media URL."),ek.type="dash",Promise.reject(ek);var lk=(ek.i||0)/ek.b;gk.push(new qg(jk-lk,kk-lk,ik));}this.a=new ug(gk);return Promise.resolve(this.a);};function bh(ek,fk,gk,hk,ik){this.b=fk;this.c=gk;this.a=null;this.f=ik;}bh.prototype.destroy=function(){this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};bh.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ek,fk=this.c.a;fk:{ek=this.f;for(var gk=this.c,fk=Math.ceil(this.b.a/(fk.a/fk.b)),hk=gk.a,ik=[],jk=0;jk<fk;++jk){var kk=jk+1,lk=(kk-1)*hk.a,mk=lk/hk.b,lk=(lk+hk.a)/hk.b,kk=ng(ek,gk,kk-1+hk.j,(kk-1)*hk.a);if(!kk){ek=null;break fk;}ik.push(new qg(mk,lk,kk));}ek=ik;};ek?(0<ek.length&&(gk=ek[ek.length-1],ek[ek.length-1]=new qg(gk.b,this.b.a,gk.url)),ek=new ug(ek)):ek=null;this.a=ek;return this.a?Promise.resolve(this.a):(ek=Error("Failed to generate SegmentReferences"),ek.type="stream",Promise.reject(ek));};function ch(ek){this.b=ek;this.a=null;}ch.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};ch.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var ek=new qg(0,null,this.b);this.a=new ug([ek]);return Promise.resolve(this.a);};function dh(){}dh.prototype.parse=function(ek,fk,gk,hk){var ik=null;try{ek:{var kk=[],lk=new tb(ek),mk=yb(lk);if(1936286840!=yb(lk)){ik=null;}else{1==mk&&(mk=zb(lk));var nk=xb(lk);bc(lk,3);bc(lk,4);var ok=yb(lk);if(0==ok){ik=null;}else{var pk,qk;0==nk?(pk=yb(lk),qk=yb(lk)):(pk=zb(lk),qk=zb(lk));bc(lk,2);var rk=lk.b.getUint16(lk.a,lk.c);lk.a+=2;ek=pk;fk=fk+mk+qk;for(mk=0;mk<rk;mk++){var sk=yb(lk);qk=(sk&2147483648)>>>31;var nk=sk&2147483647,tk=yb(lk);yb(lk);if(1==qk){ik=null;break ek;}var uk=new hg(hk,gk,fk,fk+nk-1);kk.push(new qg(ek/ok,(ek+tk)/ok,uk));ek+=tk;fk+=nk;}ik=kk;}}};}catch(jk){if(!(jk instanceof RangeError))throw jk;}return ik;};function eh(ek,fk,gk,hk,ik,jk,kk){this.f=gk;this.a=hk;this.c=ik;this.h=this.b=null;this.g=kk;}eh.prototype.destroy=function(){this.g=null;this.a.f();this.a=null;this.c&&(this.c.f(),this.c=null);this.h&&(this.h.destroy(),this.h=null);this.b=null;};eh.prototype.create=function(){if(this.b)return this.b;var ek=[jg(this.a)];"webm"==this.f&&ek.push(jg(this.c));return this.b=Promise.all(ek).then(ab(this,function(fk){var gk=fk[0];fk=fk[1]||null;var hk=null;"mp4"==this.f?(hk=new dh(),hk=hk.parse(new DataView(gk),this.a.h,this.a.c,this.g)):"webm"==this.f&&(hk=new tg(),hk=hk.parse(new DataView(gk),new DataView(fk),this.a.c,this.g));return hk?Promise.resolve(new ug(hk)):(gk=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),gk.type="stream",Promise.reject(gk));}));};function fh(ek){this.a=ek;}fh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);};fh.prototype.create=function(){return this.a?jg(this.a):Promise.resolve(null);};function gh(){this.b=hh++;this.id=this.L=this.F=null;this.h=0;this.height=this.width=this.bandwidth=null;this.f=this.c="";this.g=[];this.I=false;this.a=true;}var hh=0;gh.prototype.destroy=function(){this.F&&(this.F.destroy(),this.F=null);this.L&&(this.L.destroy(),this.L=null);};function ih(ek){var fk=ek.c||"";ek.f&&(fk+='; codecs="'+ek.f+'"');return fk;}function jh(){this.b=kh++;this.id=null;this.contentType=this.lang="";this.f=false;this.a=[];this.c=[];}var kh=0;jh.prototype.destroy=function(){for(var ek=0;ek<this.a.length;++ek)this.a[ek].destroy();this.c=this.a=null;};function lh(ek){for(var fk=[],gk=0;gk<ek.c.length;++gk){var hk=new oh();hk.id=ek.b;hk.a=ek.c[gk];hk.contentType=ek.contentType;hk.b=ek.a.length?ih(ek.a[0]):"";fk.push(hk);}return fk;}function mh(){this.id=null;this.start=0;this.b=null;this.a=[];}mh.prototype.destroy=function(){for(var ek=0;ek<this.a.length;++ek)this.a[ek].destroy();this.a=null;};function nh(){this.b=false;this.g=this.h=this.f=null;this.c=0;this.a=[];}nh.prototype.destroy=function(){for(var ek=0;ek<this.a.length;++ek)this.a[ek].destroy();this.a=null;};function oh(){this.id=0;this.a=null;this.b=this.contentType="";}function ph(ek){this.a=ek;}function qh(ek){if(ek.a.length){null==ek.a[0].start&&(ek.a[0].start=0);var fk=function(mk){return 0==mk||!!mk;};"dynamic"==ek.type&&(ek.b=null);fk(ek.b)&&1==ek.a.length&&!fk(ek.a[0].a)&&(ek.a[0].a=ek.b);for(var gk=0,hk=true,ik=0;ik<ek.a.length;++ik){var jk=ek.a[ik-1],kk=ek.a[ik],lk=ek.a[ik+1]||{start:ek.b};!fk(kk.start)&&jk&&fk(jk.start)&&fk(jk.a)&&(kk.start=jk.start+jk.a);!fk(kk.a)&&fk(lk.start)&&(kk.a=lk.start-kk.start);null!=kk.start&&null!=kk.a?gk+=kk.a:hk=false;}fk(ek.b)||(ik=ek.a[ek.a.length-1],hk?ek.b=gk:fk(ik.start)&&fk(ik.a)?ek.b=ik.start+ik.a:"dynamic"!=ek.type&&(ek.b=gk));}}function rh(ek,fk,gk,hk){var ik=new mh();ik.id=gk.id;ik.start=gk.start;ik.b=gk.a;var jk=new jc();gk.b.forEach(function(tk){jk.push(tk.contentType||"",tk);});for(var kk=mc(jk),lk=0;lk<kk.length;++lk){var mk=new jc();jk.get(kk[lk]).forEach(function(tk){mk.push(tk.group,tk);});for(var nk=mc(mk),ok=0;ok<nk.length;++ok){var pk=new jc();mk.get(nk[ok]).forEach(function(tk){pk.push(tk.lang,tk);});for(var qk=mc(pk),rk=0;rk<qk.length;++rk){var sk=pk.get(qk[rk]),sk=sh(ek,fk,gk,sk,hk);ik.a.push(sk);}}}return ik;}function sh(ek,fk,gk,hk,ik){z(hk.every(function(rk){return rk.group==hk[0].group&&(rk.lang||"")==(hk[0].lang||"")&&(rk.contentType||"")==(hk[0].contentType||"");}));var jk=new jh(),kk=hk.filter(function(rk){return null!=rk.id;});kk.length==hk.length&&(jk.id=kk.map(function(rk){return rk.id;}).sort().reduce(function(rk,sk){return rk+","+sk;}));jk.lang=hk[0].lang||"";jk.contentType=hk[0].contentType||"";jk.f=hk.some(function(rk){return rk.c;});for(var kk={},lk=0;lk<hk.length;++lk)for(var mk=hk[lk],nk=0;nk<mk.a.length;++nk){var ok=mk.a[nk],pk=vh(ek,ok),qk=jk.c.slice(0);uh(pk,qk);0==qk.length&&0<jk.c.length||!(ok=xh(fk,gk,ok,ik))||(jk.a.push(ok),jk.c=qk,kk[ok.b]=mk);}if(jk.c.some(function(rk){return ""==rk.a;}))return jk.a.forEach(function(rk){rk.I=true;}),jk;ek=th(hk);for(lk=0;lk<jk.a.length;++lk)ok=jk.a[lk],mk=kk[ok.b],mk==ek&&(ok.I=true);return jk;}function th(ek){for(var fk=null,gk=null,hk=0;hk<ek.length;++hk)for(var ik=ek[hk],jk=0;jk<ik.a.length;++jk){var kk=ik.a[jk],kk=(kk.width||1)*(kk.height||1)*(kk.bandwidth||1);if(null==fk||kk<fk)fk=kk,gk=ik;}return gk;}function uh(ek,fk){if(0==fk.length){Array.prototype.push.apply(fk,ek);}else for(var gk=0;gk<fk.length;++gk){for(var hk=false,ik=0;ik<ek.length;++ik){var jk=fk[gk],kk=ek[ik];if(jk.a==kk.a&&jk.j==kk.j&&jk.o==kk.o&&jk.f==kk.f&&jk.g==kk.g&&jk.i==kk.i&&jk.l==kk.l&&jk.h==kk.h&&jk.s==kk.s&&nb(jk.c,kk.c)){hk=true;break;}}hk||(fk.splice(gk,1),--gk);}}function vh(ek,fk){var gk=[];if(0==fk.c.length){gk.push(new ob());}else if(ek.a)for(var hk=0;hk<fk.c.length;++hk)gk.push.apply(gk,wh(ek,fk.c[hk]));return gk;}function wh(ek,fk){var gk=[];if(2==ek.a.length){var hk=ek.a(fk.schemeIdUri,fk.b);if(!(hk&&hk instanceof Array))return [];for(var ik=0;ik<hk.length;++ik){var jk,kk=hk[ik];jk=new ob();if(kk){var lk=wd(kk,"keySystem");if(null!=lk){jk.a=lk;}else throw Error("'keySystem' cannot be null.");var mk=wd(kk,"licenseServerUrl");if(null!=mk){jk.j=mk;}else if(lk)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");lk=xd(kk,"withCredentials","boolean");null!=lk&&(jk.o=lk);lk=yd(kk,"licensePostProcessor",Function);null!=lk&&(jk.f=lk);lk=yd(kk,"licensePreProcessor",Function);null!=lk&&(jk.g=lk);lk=xd(kk,"distinctiveIdentifierRequired","boolean");null!=lk&&(jk.i=lk);lk=xd(kk,"persistentStateRequired","boolean");null!=lk&&(jk.l=lk);lk=wd(kk,"audioRobustness");null!=lk&&(jk.h=lk);lk=wd(kk,"videoRobustness");null!=lk&&(jk.s=lk);lk=yd(kk,"serverCertificate",Uint8Array);null!=lk&&(jk.c=lk);if(lk=yd(kk,"initData",Object)){kk=yd(lk,"initData",Uint8Array);if(null==kk)throw Error("'initData.initData' cannot be null.");lk=wd(lk,"initDataType");if(null==lk)throw Error("'initData.initDataType' cannot be null.");jk.b.push({initData:new Uint8Array(kk.buffer),initDataType:lk});}}0==jk.b.length&&fk.pssh&&fk.pssh.psshBox&&pb(jk,[{initData:fk.pssh.psshBox,initDataType:"cenc"}]);gk.push(jk);}}else{hk=ek.a(fk);if(!(hk&&hk instanceof qb))return [];ik=new ob();ik.a=hk.g;ik.j=hk.j;ik.o=hk.o;ik.f=hk.h;ik.g=hk.i;ik.i=hk.f;ik.l=hk.l;ik.h=hk.c;ik.s=hk.s;ik.c=hk.b?new Uint8Array(hk.b.buffer):null;pb(ik,hk.a);gk.push(ik);}return gk;}function xh(ek,fk,gk,hk){if(!gk.m||0===gk.m.length)return null;var ik=null,jk=1,kk=0;if(gk.g){fk=gk.f.split("/")[1],"mp4"!=fk&&"webm"!=fk?ik=null:(ek=gk.g,"webm"!=fk||ek.c?ek.a||ek.b&&ek.b.a?(ik=ek.b,ik||(ik=new af(),ik.url=gk.m,ik.a=ek.a?ek.a.clone():null),ik=zh(ik,hk),ek=ek.c?zh(ek.c,hk):null,hk=new eh(0,0,fk,ik,ek,0,hk),fk=new fh(ek),ek=new gh(),ek.F=hk,ek.L=fk,ik=ek):ik=null:ik=null),jk=gk.g.g,kk=gk.g.f;}else if(gk.b){ek=gk.b,!ek.c&&!ek.f&&1<ek.b.length?ik=null:ek.c||fk.a||ek.f||1!=ek.b.length?ek.f&&0===ek.f.a.length?ik=null:(ek=ek.h?zh(ek.h,hk):null,hk=new zg(0,fk,gk,0,hk),fk=new fh(ek),ek=new gh(),ek.F=hk,ek.L=fk,ik=ek):ik=null,jk=gk.b.a,kk=gk.b.g;}else if(gk.a){ek:if(ik=gk.a,jk=0+(ik.f?1:0),jk+=ik.c?1:0,jk+=ik.a?1:0,0==jk?jk=false:(1!=jk&&(ik.f?(ik.c=null,ik.a=null):ik.c&&(ik.a=null)),jk=true),jk){jk=null;if(ik.g&&(jk=(ik=gk.a.g)?yh(gk,ik,bf):null,!jk)){ik=null;break ek;}ik=jk?zh(jk,hk):null;jk=gk.a;jk.f?(fk=gk.f.split("/")[1],"mp4"!=fk&&"webm"!=fk?hk=null:"webm"!=fk||ik?ng(hk,gk,1,0)?(ek=(ek=gk.a.f)?yh(gk,ek,af):null)?(ek=zh(ek,hk),hk=new eh(0,0,fk,ek,ik,0,hk)):hk=null:hk=null:hk=null):hk=jk.h?jk.c?new ah(0,fk,gk,0,hk):jk.a?"dynamic"!=ek.type&&null==fk.a?null:new bh(0,fk,gk,0,hk):null:null;hk?(fk=new fh(ik),ek=new gh(),ek.F=hk,ek.L=fk,ik=ek):ik=null;}else ik=null;;jk=gk.a.b;kk=gk.a.i;}else "text"==gk.f.split("/")[0]&&(ik=new gh(),ik.F=new ch(new hg(hk,gk.m)));if(!ik)return null;ik.id=gk.id;kk&&(ik.h=-1*kk/jk);ik.bandwidth=gk.bandwidth;ik.width=gk.width;ik.height=gk.height;ik.c=gk.f||"";ik.f=gk.h||"";for(hk=0;hk<gk.c.length;++hk)fk=gk.c[hk],fk.a&&ik.g.push(fk.a);return ik;}function yh(ek,fk,gk){fk=og(fk,ek.id,null,ek.bandwidth,null);if(!fk)return null;gk=new gk();gk.url=ig(ek.m,fk);return gk;}function zh(ek,fk){var gk=ek.url,hk=0,ik=null;ek.a&&(hk=ek.a.aa,ik=ek.a.end);return new hg(fk,gk,hk,ik);}function ai(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function bi(ek,fk){var gk=new ci(fk);ek.streamHistory.push(new di(gk));if(gk.videoHeight||!ek.streamStats)ek.streamStats=gk;}function ci(ek){this.videoWidth=ek.width;this.videoHeight=ek.height;this.videoMimeType=ek.c;this.videoBandwidth=ek.bandwidth;}function di(ek){this.timestamp=(Date.now()+hb)/1000;this.value=ek;}function ei(ek,fk,gk,hk,ik){cd.call(this,ek);this.c=fk;this.a=new rc(gk,hk,ik);this.G=0;this.v=this.B=this.b=null;this.C=false;this.g=null;this.o=false;this.j=null;this.i=false;this.h=new ec();this.l=this.f=false;this.D=0;this.u=15;this.w=false;}m(ei,cd);ei.prototype.A=function(ek){null!=ek.initialStreamBufferSize&&(this.D=Number(ek.initialStreamBufferSize));null!=ek.streamBufferSize&&(this.u=Number(ek.streamBufferSize));null!=ek.segmentRequestTimeout&&(this.a.s=Number(ek.segmentRequestTimeout));};ei.prototype.destroy=function(){li(this);this.h.destroy();this.b=this.h=null;this.a.destroy();this.s=this.c=this.a=null;};j=ei.prototype;j.ma=function(){return this.b;};j.za=function(){return this.B;};j.Ga=function(ek){this.f||ek.then(function(){this.f=true;this.g||ki(this,0);}.bind(this)).catch(function(){});return this.h;};j.Aa=function(){return this.l;};j.oa=function(ek,fk,gk){ek!=this.b&&(this.v=ek.L.create(),ek.F.create().then(ab(this,function(hk){if(this.c){var ik=this.b;this.b=ek;this.B=hk;this.C=true;this.o||(ik?fk&&fi(this,true,gk):ki(this,0));}})).catch(ab(this,function(hk){"aborted"!=hk.type&&(this.f?(hk=ra(hk),this.dispatchEvent(hk)):this.h.reject(hk));})));};j.Ca=function(){return fi(this,false);};function fi(ek,fk,gk){ek.b&&!ek.o&&(ek.o=true,li(ek),yc(ek.a).then(ab(ek,function(){var hk=this.c.currentTime;if(!fk&&0<tc(this.a,hk)&&0<=rg(this.a.b,hk))return Promise.resolve();if(gk)return xc(this.a,this.c.currentTime+gk);this.w=true;return wc(this.a);})).then(ab(ek,function(){this.o=false;ki(this,0);})).catch(ab(ek,function(hk){this.o=false;this.f?(hk=ra(hk),this.dispatchEvent(hk)):this.h.reject(hk);})));}j.Da=function(ek){return 0<tc(this.a,ek)&&0<=rg(this.a.b,ek);};j.na=function(){};j.ta=function(){return true;};j.va=function(){return this.i?this.u:Math.min(this.D,this.u);};j.Za=function(){if(this.i&&!this.f){this.g=null;}else{var ek;if(ek=this.f&&!this.l)ek=1<this.a.c.buffered.length?true:false;if(ek){fi(this,true);}else{this.g=null;ek=this.b;var fk=this.B,gk=this.c.currentTime;tc(this.a,this.i?gk:gk+(this.j||0))>=this.va()?(hi(this),ki(this,1000/(5*(Math.abs(this.c.playbackRate)||1)))):(fk=gi(this,gk,fk))?(fk=vc(this.a,fk,ek.h,this.v),this.v=null,this.C&&(this.C=false,ii(this,ek)),this.l=false,fk.then(ab(this,function(hk){var ik=hk.pa;hk=hk.Ka;this.i||(this.G=hk);null==this.j&&(this.j=ik);this.w&&0<tc(this.a,gk)&&(this.w=false,this.c.currentTime+=.001);ki(this,0);})).catch(ab(this,function(hk){if("aborted"!=hk.type){var ik=[0,404,410];"net"==hk.type&&-1!=ik.indexOf(hk.mb.status)&&this.b&&ki(this,1000);hk=ra(hk);this.dispatchEvent(hk);}}))):(hi(this),this.f&&!this.l&&(this.l=true,ji(this)),ki(this,200));}}};function gi(ek,fk,gk){ek=ek.a;var hk=ek.b.length;ek=0<hk?ek.b[hk-1]:null;return null!=ek?null!=ek.a?xg(gk,ek.a):null:xg(gk,fk)||(gk.length()?wg(gk):null);}function hi(ek){if(!ek.i&&null!=ek.j){ek.i=true;var fk=ek.a,gk=ek.j,hk=gk-fk.o;0!=hk&&(fk.b=sg(fk.b,hk),fk.o=gk);ek.h.resolve(ek.j);}}function ii(ek,fk){var gk;gk=fk.c.split("/")[0];gk=qa({type:"adaptation",bubbles:true,contentType:gk,size:"video"!=gk?null:{width:fk.width,height:fk.height},bandwidth:fk.bandwidth});ek.dispatchEvent(gk);}function ji(ek){var fk=qa({type:"ended"});ek.dispatchEvent(fk);}function ki(ek,fk){ek.g=i.setTimeout(ek.Za.bind(ek),fk);}function li(ek){null!=ek.g&&(i.clearTimeout(ek.g),ek.g=null);}j.ua=function(){return this.G;};function mi(ek,fk){cd.call(this,ek);this.b=fk;this.h=true;this.g=this.f=null;this.c=new ec();this.a=null;}m(mi,cd);mi.prototype.A=function(){};mi.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.s=this.b=this.f=this.g=this.a=this.c=null;};j=mi.prototype;j.ma=function(){return this.f;};j.za=function(){return this.g;};j.Ga=function(){return this.c;};j.Aa=function(){return true;};j.oa=function(ek){ek.F.create().then(ab(this,function(fk){if(this.b){if(0==fk.length())return Promise.reject(Error("No subtitles URL available."));var gk=this.f;this.f=ek;this.g=fk;fk=vg(fk).url.c[0].toString();var hk=this.ta();this.a&&(this.na(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=fk;this.na(hk);fk=qa({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:ek.bandwidth});this.dispatchEvent(fk);gk||this.c.resolve(0);}}));};j.Ca=function(){};j.Da=function(){return true;};j.na=function(ek){this.h=ek;this.a&&(this.a.track.mode=ek?"showing":"disabled");};j.ta=function(){return this.h;};j.va=function(){return 0;};function ni(ek,fk,gk,hk,ik){this.b=new hg(null,[new ae(ek)]);this.a=new cg();this.a.body=fk;this.a.method=gk;this.a.a=3;this.a.h=hk;this.a.c=0;ek=ik||{};for(var jk in ek)this.a.b[jk]=ek[jk];}function oi(ek){return jg(ek.b,ek.a).then(function(fk){return Promise.resolve(new Uint8Array(fk));});}function pi(ek,fk,gk){cd.call(this,ek);this.b=fk;this.j=gk;this.a=this.f=null;this.i=new nc();this.g={};this.h=[];this.o=0;this.c=new ec();this.l=null;}m(pi,cd);pi.prototype.destroy=function(){this.s=null;for(var ek=0;ek<this.h.length;++ek)this.h[ek].close().catch(function(){});this.h=[];this.g=this.a=this.f=null;this.c.destroy();this.c=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.b=this.j=null;};pi.prototype.initialize=function(){var ek=new jc(),fk;fk=this.j;if(fk.w){fk=fk.a.a[0];for(var gk=[],hk=0;hk<fk.a.length;++hk)gk.push.apply(gk,lh(fk.a[hk]));fk=gk;}else fk=[];for(gk=0;gk<fk.length;++gk)hk=fk[gk],hk.a.a||hk.b&&!wi(hk.b)||ek.push(hk.contentType,hk);for(var gk={},hk=false,ik=0;ik<fk.length;++ik){var jk=fk[ik];if(jk.a.a&&!ek.a.hasOwnProperty(jk.contentType)){var kk=jk.a.a,lk=gk[kk];lk||(lk=jk.a,lk={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:lk.i?"required":"optional",persistentState:lk.l?"required":"optional",sessionTypes:["temporary"]},gk[kk]=lk);if(jk.b&&(kk=jk.contentType+"Capabilities",kk in lk)){hk=true;lk[kk]||(lk[kk]=[]);var mk;"audio"==jk.contentType?mk=jk.a.h:"video"==jk.contentType&&(mk=jk.a.s);lk[kk].push({contentType:jk.b,robustness:mk});}}}if(!hk)if(fk.length){this.a=fk[0].a;}else throw ek=Error("No DrmInfo exists!"),ek.type="drm",ek;if(0==Object.keys(gk).length)return jj(this.j,ek),this.c.resolve(),Promise.resolve();mk=new ec();gk=qi(gk,mk);gk=gk.then(this.Ja.bind(this,fk,ek));gk=gk.then(this.gb.bind(this));mk.reject(null);return gk;};function qi(ek,fk){for(var gk in ek)fk=fk.catch(function(hk,ik){return navigator.requestMediaKeySystemAccess(hk,[ik]);}.bind(null,gk,ek[gk]));return fk;}j=pi.prototype;j.Ja=function(ek,fk,gk){if(!this.b)return ri();for(var hk=gk.keySystem,ik=gk.getConfiguration(),jk=["audio","video"],kk=0;kk<jk.length;++kk){var lk=jk[kk];if(!fk.a.hasOwnProperty(lk)){var mk=ik[lk+"Capabilities"];if(mk&&mk.length){for(var mk=mk[0],nk=[],ok={},pk=0;pk<ek.length;++pk){var qk=ek[pk];if(qk.a.a==hk&&qk.b==mk.contentType&&!(qk.id in ok)){nk.push(qk);ok[qk.id]=true;var rk;if(this.a){rk=this.a;var qk=qk.a,sk=new ob();sk.a=rk.a;sk.j=rk.j;sk.o=rk.o;sk.f=rk.f;sk.g=rk.g;sk.i=rk.i;sk.l=rk.l;sk.h=rk.h;sk.s=rk.s;sk.c=rk.c?new Uint8Array(rk.c.buffer):null;pb(sk,rk.b);pb(sk,qk.b);rk=sk;}else rk=qk.a;this.a=rk;}}fk.a[lk]=nk;}}}jj(this.j,fk);return gk.createMediaKeys();};j.gb=function(ek){if(!this.b)return ri();this.f=ek;return this.b.setMediaKeys(this.f).then(ab(this,function(){return this.b?this.a.c?this.f.setServerCertificate(this.a.c):Promise.resolve():ri();})).then(ab(this,function(){if(!this.b)return ri();for(var fk=0;fk<this.a.b.length;++fk){var gk=this.a.b[fk];this.Ba({type:"encrypted",initDataType:gk.initDataType,initData:gk.initData});}0==this.a.b.length&&oc(this.i,this.b,"encrypted",this.Ba.bind(this));}));};function ri(){var ek=Error("EmeManager destroyed");ek.type="destroy";return Promise.reject(ek);}j.Ba=function(ek){var fk=new Uint8Array(ek.initData),gk=Array.prototype.join.apply(fk);if(!this.g[gk]){try{var ik=si(this);}catch(hk){ik=ra(hk);this.dispatchEvent(ik);this.c.reject(hk);return;}ek=ik.generateRequest(ek.initDataType,ek.initData);this.g[gk]=true;ek.catch(ab(this,function(jk){if(this.g){this.g[gk]=false;var kk=ra(jk);this.dispatchEvent(kk);this.c.reject(jk);}}));this.h.push(ik);}};function si(ek){var fk=null,fk=ek.f.createSession();oc(ek.i,fk,"message",ek.Va.bind(ek));oc(ek.i,fk,"keystatuseschange",ek.Na.bind(ek));return fk;}j.Va=function(ek){ti(this,ek.target,this.a,ek.message);};j.Na=function(ek){ek=ek.target.keyStatuses;for(var fk={},gk=ek.keys(),hk=gk.next();!hk.done;hk=gk.next()){var ik=mb(new Uint8Array(hk.value)),hk=ek.get(hk.value);fk[ik]=hk;}mj(this.j,fk);};function ti(ek,fk,gk,hk){hk=ui(gk,hk);oi(new ni(hk.url,hk.body,hk.method,gk.o,hk.headers)).then(ab(ek,function(ik){gk.f&&(ik=gk.f(ik));return fk.update(ik);})).then(ab(ek,function(){var ik=qa({type:"sessionReady",detail:fk});this.dispatchEvent(ik);this.o++;this.o>=this.h.length&&this.c.resolve();})).catch(ab(ek,function(ik){ik.qb=fk;ik=ra(ik);this.dispatchEvent(ik);}));}function ui(ek,fk){var gk={url:ek.j,body:fk.slice(0),method:"POST",headers:{}};if(!ek.g)return gk;ek.g(gk);gk.url=wd(gk,"url");if(null==gk.url)throw Error("'url' cannot be null.");if(!(gk.body instanceof ArrayBuffer||"string"==typeof gk.body||null==gk.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");gk.method=wd(gk,"method");if("GET"!=gk.method&&"POST"!=gk.method)throw Error("'method' must be either 'GET' or 'POST'.");gk.headers=yd(gk,"headers",Object);if(null==gk.headers)throw Error("'headers' cannot be null.");return gk;}function vi(ek){cd.call(this,null);this.a=ek;this.b=null;this.f=new nc();this.j=this.l=null;this.A=0;this.v=null;this.i=false;this.C=true;this.g=new ai();this.c={enableAdaptation:true,streamBufferSize:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new r()};this.o=1;this.B=null;}m(vi,cd);l("shaka.player.Player",vi);vi.version="";vi.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};vi.prototype.da=function(ek){this.C=ek;};vi.prototype.setResumeAfterBuffering=vi.prototype.da;function wi(ek){return "text/vtt"==ek?!!i.VTTCue:MediaSource.isTypeSupported(ek);}vi.isTypeSupported=wi;vi.setTextStyle=function(ek){var fk=document.getElementById("ShakaPlayerTextStyle");fk||(fk=document.createElement("style"),fk.id="ShakaPlayerTextStyle",document.head.appendChild(fk));for(fk=fk.sheet;fk.cssRules.length;)fk.deleteRule(0);fk.insertRule("::cue { "+ba(ek)+" }",0);};vi.prototype.destroy=function(){return this.u().then(ab(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};vi.prototype.destroy=vi.prototype.destroy;vi.prototype.u=function(){if(!this.b)return Promise.resolve();this.i&&bj(this);this.a.pause();pc(this.f);aj(this);yi(this);this.l&&(this.l.destroy(),this.l=null);this.a.src="";var ek=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.i=false;this.g=new ai();return ek;};vi.prototype.unload=vi.prototype.u;vi.prototype.ka=function(ek){hj(ek,this.a);var fk=this.u();this.a.autoplay&&(la("load"),oc(this.f,this.a,"timeupdate",this.Ma.bind(this)));ek.ka(this.c);ek.G=this.B;this.B=null;fk=fk.then(ab(this,function(){return ek.Y();}));fk.catch(ab(this,function(gk){ek.destroy();return Promise.reject(gk);}));return fk.then(ab(this,function(){if(!this.a)return xi();this.b=ek;oc(this.f,this.b,"seekrangechanged",this.Ta.bind(this));this.l=new pi(this,this.a,this.b);return this.l.initialize();})).then(ab(this,function(){if(!this.a)return xi();oc(this.f,this.a,"error",this.hb.bind(this));oc(this.f,this.a,"playing",this.Ra.bind(this));oc(this.f,this.a,"pause",this.Qa.bind(this));return ij(this.b,this,this.a);})).then(ab(this,function(){if(!this.a)return xi();zi(this);})).catch(ab(this,function(gk){if(!this.a)return xi();if("destroy"!=gk.type){var hk=ra(gk);this.dispatchEvent(hk);}return this.u().then(function(){return Promise.reject(gk);});}));};vi.prototype.load=vi.prototype.ka;function xi(){var ek=Error("Player destroyed");ek.type="destroy";return Promise.reject(ek);}j=vi.prototype;j.Ma=function(){ma("load");this.g.playbackLatency=na("load")/1000;this.f.ba(this.a,"timeupdate");};j.hb=function(){if(this.a.error){var ek=this.a.error.code;ek!=MediaError.MEDIA_ERR_ABORTED&&(ek=Error(cj[ek]||"Unknown playback error."),ek.type="playback",ek=ra(ek),this.dispatchEvent(ek));}};j.Ra=function(){la("playing");!this.j&&0>this.o&&(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),this.o));this.i&&bj(this);};j.Qa=function(){ma("playing");var ek=na("playing");if(!isNaN(ek)){var fk=this.g;fk.playTime+=ek/1000;}yi(this);};j.Ta=function(ek){this.A=ek.start;};j.Ea=function(){if(!this.a.paused){ma("playing");var ek=na("playing");if(!isNaN(ek)){var fk=this.g;fk.playTime+=ek/1000;la("playing");}}ek=this.g;fk=this.a;fk.getVideoPlaybackQuality&&(fk=fk.getVideoPlaybackQuality(),ek.decodedFrames=fk.totalVideoFrames,ek.droppedFrames=fk.droppedVideoFrames);return this.g;};vi.prototype.getStats=vi.prototype.Ea;vi.prototype.ja=function(){return this.b?this.b.D():[];};vi.prototype.getVideoTracks=vi.prototype.ja;vi.prototype.ga=function(){return this.b?this.b.S():[];};vi.prototype.getAudioTracks=vi.prototype.ga;vi.prototype.ia=function(){return this.b?this.b.la():[];};vi.prototype.getTextTracks=vi.prototype.ia;vi.prototype.selectVideoTrack=function(ek,fk){return this.b?this.b.selectVideoTrack(ek,void 0==fk?true:fk):false;};vi.prototype.selectVideoTrack=vi.prototype.selectVideoTrack;vi.prototype.la=function(ek,fk){return this.b?oj(this.b,"audio",ek,void 0==fk?true:fk):false;};vi.prototype.selectAudioTrack=vi.prototype.la;vi.prototype.ca=function(ek){return this.b?oj(this.b,"text",ek,false):false;};vi.prototype.selectTextTrack=vi.prototype.ca;vi.prototype.fa=function(ek){this.b&&kj(this.b,ek);};vi.prototype.enableTextTrack=vi.prototype.fa;vi.prototype.G=function(ek){this.h({enableAdaptation:ek});};vi.prototype.enableAdaptation=vi.prototype.G;vi.prototype.M=function(){return this.c.enableAdaptation;};vi.prototype.getAdaptationEnabled=vi.prototype.M;vi.prototype.ea=function(ek){this.h({streamBufferSize:ek});};vi.prototype.setStreamBufferSize=vi.prototype.ea;vi.prototype.S=function(){return Number(this.c.streamBufferSize);};vi.prototype.getStreamBufferSize=vi.prototype.S;vi.prototype.ra=function(ek){this.h({licenseRequestTimeout:ek/1000});};vi.prototype.setLicenseRequestTimeout=vi.prototype.ra;vi.prototype.U=function(ek){this.h({mpdRequestTimeout:ek/1000});};vi.prototype.setMpdRequestTimeout=vi.prototype.U;vi.prototype.Z=function(ek){this.h({segmentRequestTimeout:ek/1000});};vi.prototype.setRangeRequestTimeout=vi.prototype.Z;vi.prototype.Y=function(ek){this.h({preferredLanguage:ek});};vi.prototype.setPreferredLanguage=vi.prototype.Y;vi.prototype.X=function(ek){yi(this);0<=ek?this.a.playbackRate=ek:this.a.paused||(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),ek));this.o=ek;};vi.prototype.setPlaybackRate=vi.prototype.X;vi.prototype.P=function(){return this.o;};vi.prototype.getPlaybackRate=vi.prototype.P;vi.prototype.$=function(ek){this.h({restrictions:ek});};vi.prototype.setRestrictions=vi.prototype.$;vi.prototype.R=function(){return this.c.restrictions.clone();};vi.prototype.getRestrictions=vi.prototype.R;vi.prototype.sa=function(ek){this.B=ek;};vi.prototype.setPlaybackStartTime=vi.prototype.sa;vi.prototype.D=function(){var ek;this.b?(ek=this.b,ek=ek.a?ek.a.b:false):ek=false;return ek;};vi.prototype.isLive=vi.prototype.D;vi.prototype.h=function(ek){if(ek){var fk=xd(ek,"enableAdaptation","boolean");null!=fk&&(this.c.enableAdaptation=fk);fk=vd(ek,"streamBufferSize");null!=fk&&(this.c.streamBufferSize=fk);fk=vd(ek,"licenseRequestTimeout");null!=fk&&(this.c.licenseRequestTimeout=fk);fk=vd(ek,"mpdRequestTimeout");null!=fk&&(this.c.mpdRequestTimeout=fk);fk=vd(ek,"segmentRequestTimeout");null!=fk&&(this.c.segmentRequestTimeout=fk);fk=wd(ek,"preferredLanguage");null!=fk&&(this.c.preferredLanguage=fk);ek=yd(ek,"restrictions",r);null!=ek&&(this.c.restrictions=ek.clone());this.b&&this.b.ka(this.c);}};vi.prototype.configure=vi.prototype.h;vi.prototype.ha=function(){return this.c;};vi.prototype.getConfiguration=vi.prototype.ha;function yi(ek){ek.j&&(i.clearTimeout(ek.j),ek.j=null);}function zi(ek){aj(ek);ek.v=i.setTimeout(ek.T.bind(ek),100);}function aj(ek){ek.v&&(i.clearTimeout(ek.v),ek.v=null);}vi.prototype.w=function(ek,fk,gk){this.j=null;var hk=(Date.now()-fk)/1000*gk;this.a.currentTime<this.A+(this.D()?1:.05)?this.a.pause():(hk=Math.max(this.A,ek+hk),this.a.currentTime=hk,this.j=i.setTimeout(this.w.bind(this,ek,fk,gk),250));};function bj(ek){ma("buffering");var fk=ek.g;fk.bufferingTime+=na("buffering")/1000;ek.i=false;ek.dispatchEvent(qa({type:"bufferingEnd"}));}vi.prototype.T=function(){zi(this);if(!this.a.ended&&!this.a.seeking){var ek=this.a.buffered,fk=ek.length?ek.end(ek.length-1):0,ek=Math.max(fk-this.a.currentTime,0),gk=this.a.duration,hk=this.a.currentTime;if(this.i){var ik,fk=this.b,jk=null;for(ik in fk.c){var kk=fk.c[ik].va();0<kk&&(jk=null!=jk?Math.min(jk,kk):kk);}ik=jk||0;gk=Math.max(gk-hk-.05,0);if(ek>ik||ek>gk)bj(this),this.C&&this.a.play();}else gk=isNaN(gk)?0:Math.max(gk-.05,0),!(this.a.paused||fk>=gk||hk>=gk)&&.2>ek&&(this.i=true,this.a.pause(),this.g.bufferingHistory.push((Date.now()+hb)/1000),la("buffering"),this.dispatchEvent(qa({type:"bufferingStart"})));}};var cj={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function dj(){this.a=this.b=null;this.f=new nc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",dj);dj.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};dj.prototype.initialize=function(ek,fk){this.b||this.a||(this.b=ek,this.a=fk);};dj.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,oc(this.f,this.b,"bandwidth",this.l.bind(this)),oc(this.f,this.a,"adaptation",this.j.bind(this)),oc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};dj.prototype.enable=function(ek){this.i=ek;};dj.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var ek=ej(this);return ek?ek.id:null;};dj.prototype.selectVideoTrack=function(ek,fk,gk){this.g&&this.a.selectVideoTrack(ek.id,fk,gk);};dj.prototype.l=function(){Date.now()<this.c||this.h();};dj.prototype.h=function(){if(this.i){var ek=ej(this);if(ek){if(ek.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(ek,false);}this.c=Number.POSITIVE_INFINITY;}};dj.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function ej(ek){var fk=ek.a.D();if(0==fk.length)return null;fk.sort(q);var gk;ek:{gk=ek.a.S();for(var hk=0;hk<gk.length;++hk)if(gk[hk].active){gk=gk[hk];break ek;}gk=null;};gk=gk?gk.bandwidth:0;ek=ek.b.getBandwidth();for(var hk=fk[0],ik=0;ik<fk.length;++ik){var jk=fk[ik],kk=ik+1<fk.length?fk[ik+1]:{bandwidth:Number.POSITIVE_INFINITY};if(jk.bandwidth&&(kk=(kk.bandwidth+gk)/.85,ek>=(jk.bandwidth+gk)/.95&&ek<=kk&&(hk=jk,hk.active)))break;}return hk;}function fj(ek,fk){var gk=ek.bandwidth||Number.MAX_VALUE,hk=fk.bandwidth||Number.MAX_VALUE;return gk<hk?-1:gk>hk?1:0;}function gj(ek,fk,gk){cd.call(this,null);this.a=ek;this.T=fk;this.j=new nc();this.g=new MediaSource();this.f=null;this.ga=this.Z=0;this.b=new jc();this.o=gk;this.o.initialize(fk,this);this.w=false;this.v="en";this.U=false;this.A=null;this.i=new ec();this.ca=new ec();this.h=new r();this.l=null;this.ha=1;this.c={};this.P=new ec();this.B=0;this.da=false;this.u={};this.G=this.C=this.$=null;this.M={};}m(gj,cd);l("shaka.player.StreamVideoSource",gj);gj.prototype.ka=function(ek){null!=ek.streamBufferSize&&(this.M.streamBufferSize=ek.streamBufferSize);null!=ek.segmentRequestTimeout&&(this.M.segmentRequestTimeout=ek.segmentRequestTimeout);ck(this);null!=ek.enableAdaptation&&this.o.enable(Boolean(ek.enableAdaptation));null!=ek.mpdRequestTimeout&&(this.ga=Number(ek.mpdRequestTimeout));null!=ek.preferredLanguage&&(this.v=fb(String(ek.preferredLanguage)));null!=ek.restrictions&&(this.h=ek.restrictions,this.w&&lj(this));};gj.prototype.destroy=function(){this.i.destroy();this.P.destroy();this.P=this.i=null;this.C&&(i.clearTimeout(this.C),this.C=null);this.$&&(i.clearTimeout(this.$),this.$=null);this.u=null;this.j.destroy();this.j=null;ud(this.c).forEach(function(ek){ek.destroy();});this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);this.o.destroy();this.s=this.h=this.A=this.f=this.g=this.T=this.o=null;};function hj(ek,fk){oc(ek.j,ek.g,"sourceopen",ek.Pa.bind(ek));fk.src=i.URL.createObjectURL(ek.g);}function ij(ek,fk,gk){if(!ek.w)return ek=Error("Cannot call attach() right now."),ek.type="stream",Promise.reject(ek);ek.s=fk;ek.f=gk;ek.A=fk.Ea();oc(ek.j,ek.T,"bandwidth",ek.ib.bind(ek));fk=ek.f.setMediaKeys(ek.f.mediaKeys);ek.ca.then(ab(ek,function(){qj(this).then(ab(this,function(){this.i&&this.i.resolve();})).catch(ab(this,function(hk){this.i&&this.i.reject(hk);}));}));return Promise.all([ek.i,fk]);}gj.prototype.Y=function(){if(this.w){var ek=Error("Cannot call load() right now.");ek.type="stream";return Promise.reject(ek);}if(!this.a||0==this.a.a.length)return ek=Error("The manifest does not specify any content."),ek.type="stream",Promise.reject(ek);if(this.a.b)return ek=Error("Live manifest support not enabled."),ek.type="stream",Promise.reject(ek);for(var ek=this.a.a,fk=0;fk<ek.length;++fk)for(var gk=ek[fk],hk=0;hk<gk.a.length;++hk){for(var ik=gk.a[hk],jk=ik,kk=0;kk<jk.a.length;++kk)wi(ih(jk.a[kk]))||(jk.a.splice(kk,1),--kk);0==ik.a.length&&(gk.a.splice(hk,1),--hk);}for(fk=0;fk<ek.length;++fk)for(gk=ek[fk],hk=0;hk<gk.a.length;++hk)gk.a[hk].a.sort(fj);if(0==this.a.a.length||0==this.a.a[0].a.length)return ek=Error("The manifest specifies content that cannot be displayed on this browser/platform."),ek.type="stream",Promise.reject(ek);this.w=true;this.M.initialStreamBufferSize=this.a.c;ck(this);lj(this);return Promise.resolve();};gj.prototype.D=function(){if(!this.b.a.hasOwnProperty("video"))return [];for(var ek=this.c.video,ek=(ek=ek?ek.ma():null)?ek.b:0,fk=[],gk=this.b.get("video"),hk=0;hk<gk.length;++hk)for(var ik=gk[hk],jk=0;jk<ik.a.length;++jk){var kk=ik.a[jk];if(kk.I&&kk.a){var lk=kk.b,kk=new p(lk,kk.bandwidth,kk.width,kk.height);lk==ek&&(kk.active=true);fk.push(kk);}}return fk;};gj.prototype.getVideoTracks=gj.prototype.D;gj.prototype.S=function(){if(!this.b.a.hasOwnProperty("audio"))return [];for(var ek=this.c.audio,ek=(ek=ek?ek.ma():null)?ek.b:0,fk=[],gk=this.b.get("audio"),hk=0;hk<gk.length;++hk)for(var ik=gk[hk],jk=ik.lang,kk=0;kk<ik.a.length;++kk){var lk=ik.a[kk];if(lk.I&&lk.a){var mk=lk.b,lk=new n(mk,lk.bandwidth,jk);mk==ek&&(lk.active=true);fk.push(lk);}}return fk;};gj.prototype.getAudioTracks=gj.prototype.S;gj.prototype.la=function(){if(!this.b.a.hasOwnProperty("text"))return [];for(var ek=this.c.text,fk=ek?ek.ma():null,fk=fk?fk.b:0,gk=[],hk=this.b.get("text"),ik=0;ik<hk.length;++ik)for(var jk=hk[ik],kk=jk.lang,lk=0;lk<jk.a.length;++lk){var mk=jk.a[lk].b,nk=new o(mk,kk);mk==fk&&(nk.active=true,nk.enabled=ek.ta());gk.push(nk);}return gk;};gj.prototype.getTextTracks=gj.prototype.la;function jj(ek,fk){if(ek.w){for(var gk={},hk=ek.a.a[0],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik];gk[jk.b]=jk;}ek.b.a={};hk=mc(fk);for(ik=0;ik<hk.length;++ik){var jk=hk[ik],kk=fk.get(jk);if("video"==jk){var lk=kk[0].id;ek.b.push(jk,gk[lk]);}else if("audio"==jk){for(var lk=kk[0].b.split(";")[0],mk=0;mk<kk.length;++mk){var nk=kk[mk];nk.b.split(";")[0]==lk&&ek.b.push(jk,gk[nk.id]);}}else for(mk=0;mk<kk.length;++mk)lk=kk[mk].id,ek.b.push(jk,gk[lk]);}ek.U=true;if(gk=ek.b.get("audio"))pj(ek,gk),ek.b.a.audio=gk,gk=gk[0].lang||ek.v,cb(2,ek.v,gk)&&(ek.U=false);if(gk=ek.b.get("text"))pj(ek,gk),ek.b.a.text=gk,gk=gk[0].lang||ek.v,cb(2,ek.v,gk)||(ek.U=false);}}gj.prototype.selectVideoTrack=function(ek,fk,gk){return oj(this,"video",ek,fk,gk);};function kj(ek,fk){var gk=ek.c.text;gk&&gk.na(fk);}function lj(ek){if(ek.h){for(var fk=false,gk=0;gk<ek.a.a.length;++gk)for(var hk=ek.a.a[gk],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik];if("video"==jk.contentType)for(var kk=0;kk<jk.a.length;++kk){var lk=jk.a[kk],mk=lk.a;lk.a=true;ek.h.maxWidth&&lk.width>ek.h.maxWidth&&(lk.a=false);ek.h.maxHeight&&lk.height>ek.h.maxHeight&&(lk.a=false);ek.h.maxBandwidth&&lk.bandwidth>ek.h.maxBandwidth&&(lk.a=false);ek.h.minBandwidth&&lk.bandwidth<ek.h.minBandwidth&&(lk.a=false);mk!=lk.a&&(fk=true);}}0!=kc(ek.b).length&&fk&&(nj(ek),0<ek.D().length||(fk=Error("The applicaion has restricted all video tracks!"),fk.type="stream",fk=ra(fk),ek.dispatchEvent(fk)));}}function mj(ek,fk){for(var gk,hk=false,ik=new jc(),jk=kc(ek.b),kk=0;kk<jk.length;++kk)for(var lk=jk[kk],mk=0;mk<lk.a.length;++mk){var nk=lk.a[mk];nk.g.forEach(function(ok){ik.push(ok,nk);});}for(gk in fk)if(jk=dc[fk[gk]]||null,lk=ik.get(gk)){for(kk=0;kk<lk.length;++kk)nk=lk[kk],mk=nk.I,nk.I=!jk,mk!=nk.I&&(hk=true);}else ib(gk);hk&&(nj(ek),hk=ek.S(),gk=ek.D(),hk=ek.b.a.hasOwnProperty("audio")&&0==hk.length,gk=ek.b.a.hasOwnProperty("video")&&0==gk.length,hk||gk)&&(gk=Error("The key system has restricted all "+(hk&&gk?"audio and video tracks.":hk?"audio tracks.":"video tracks.")),gk.type="drm",gk=ra(gk),ek.dispatchEvent(gk));}function nj(ek){var fk=qa({type:"trackschanged",bubbles:true});ek.dispatchEvent(fk);}function oj(ek,fk,gk,hk,ik){if(!ek.b.a.hasOwnProperty(fk)||!ek.c[fk])return false;for(var jk=ek.b.get(fk),kk=0;kk<jk.length;++kk)for(var lk=jk[kk],mk=0;mk<lk.a.length;++mk){var nk=lk.a[mk];if(nk.b==gk){if(!nk.I||!nk.a)return false;if("text"!=fk&&!ek.da)return gk=ek.u[fk],ek.u[fk]={Ha:nk,xa:null!=gk&&gk.xa||hk,ya:null!=gk&&gk.ya||ik},true;bi(ek.A,nk);ek.c[fk].oa(nk,hk,ik);return true;}}return false;}function pj(ek,fk){for(var gk=0;2>=gk;++gk)for(var hk=0;hk<fk.length;++hk){var ik=fk[hk];if(cb(gk,ek.v,ik.lang)){fk.splice(hk,1);fk.splice(0,0,ik);return;}}for(hk=0;hk<fk.length;++hk)if(ik=fk[hk],ik.f){fk.splice(hk,1);fk.splice(0,0,ik);break;}}j=gj.prototype;j.Pa=function(){this.j.ba(this.g,"sourceopen");this.ca.resolve();};function qj(ek){for(var fk=[],gk=["audio","video","text"],hk=0;hk<gk.length;++hk){var ik=gk[hk];ek.b.a.hasOwnProperty(ik)&&fk.push(ek.b.get(ik)[0]);}for(var jk=rj(ek,fk),hk=0;hk<gk.length;++hk)if(ik=gk[hk],ek.b.a.hasOwnProperty(ik)&&!jk[ik])return ek=Error("Unable to select an initial "+ik+" stream: all "+ik+" streams have been restricted (by the application or by the key system)."),ek.type="stream",Promise.reject(ek);fk=ud(jk).map(function(kk){return kk.F.create();});return Promise.all(fk).then(ab(ek,function(kk){if(!kk.every(function(lk){return lk.length();}))return kk=Error("Some streams are not available."),kk.type="stream",Promise.reject(kk);kk=ak(this,kk);if(!kk)return kk=Error("Some streams are not available."),kk.type="stream",Promise.reject(kk);if(!sj(this,jk))return kk=Error("Failed to create Stream objects."),kk.type="stream",Promise.reject(kk);this.o.start();uj(this,jk,kk);return Promise.resolve();})).catch(ab(ek,function(kk){if("aborted"!=kk.type)return Object.keys(this.c),this.a.b?(this.ob(),Promise.resolve()):Promise.reject(kk);}));}function rj(ek,fk){for(var gk={},hk=0;hk<fk.length;++hk){var ik=fk[hk],jk=null;if("video"==ik.contentType){var kk=ek.o.getInitialVideoTrackId();if(null==kk)continue;jk=ik.a.filter(function(lk){return lk.b==kk;});if(0==jk.length)continue;jk=jk[0];}else if("audio"==ik.contentType){jk=ik.a.filter(function(lk){return lk.I&&lk.a;});if(0==jk.length)continue;jk=ik.a[Math.floor(jk.length/2)];}else 0<ik.a.length&&(jk=ik.a[0]);gk[ik.contentType]=jk;}return gk;}function sj(ek,fk){var gk={},hk;for(hk in fk){var ik=fk[hk],ik="text"==hk?new mi(ek,ek.f):tj(ek,ik);if(!ik)return ud(gk).forEach(function(jk){jk.destroy();}),false;gk[hk]=ik;}ek.c=gk;return true;}function tj(ek,fk){var gk=new ei(ek,ek.f,ek.g,ih(fk),ek.T);gk.A(ek.M);return gk;}function uj(ek,fk,gk){ek.ha=ek.f.playbackRate;ek.f.playbackRate=0;wj(ek,gk);var hk;hk=ek.a.b?gk.end:ek.G&&ek.G<=gk.end&&ek.G>=gk.start?ek.G:gk.start;oc(ek.j,ek.f,"seeking",ek.Ua.bind(ek));ek.f.currentTime!=hk&&(ek.f.currentTime=hk,ek.l=hk);xj(ek,gk.start,gk.end);var ik=[],jk;for(jk in ek.c)gk=ek.c[jk],ab(ek,function(kk){ik.push(kk.Ga(this.P).then(ab(this,function(lk){var mk=kk.ua();mk>this.Z&&(this.Z=mk);return lk;})));})(gk),oc(ek.j,gk,"ended",ek.Wa.bind(ek)),hk=fk[jk],bi(ek.A,hk),gk.oa(hk,false);Promise.all(ik).then(ek.La.bind(ek)).catch(ab(ek,function(kk){"destroy"!=kk.type&&(kk=ra(kk),this.dispatchEvent(kk));}));kj(ek,ek.U);}j.La=function(ek){z(ek&&ek.length==Object.keys(this.c).length);for(var fk=Number.POSITIVE_INFINITY,gk=Number.NEGATIVE_INFINITY,hk=0;hk<ek.length;++hk)var ik=ek[hk],fk=Math.min(fk,ik),gk=Math.max(gk,ik);ek=zj(this);for(hk=0;hk<ek.length;++hk)yg(ek[hk],gk);vj(this,ek,gk);hk=kc(this.b).map(function(jk){return jk.a;}).reduce(function(jk,kk){return jk.concat(kk);},[]).map(function(jk){var kk=[jk.F.create()];jk.L&&kk.push(jk.L.create());return Promise.all(kk);});Promise.all(hk).then(ab(this,function(jk){for(var kk=0;kk<jk.length;++kk)yg(jk[kk][0],gk);this.da=true;for(var lk in this.u)jk=this.u[lk],kk=this.c[lk],bi(this.A,jk.Ha),kk.oa(jk.Ha,jk.xa,jk.ya);this.u={};})).catch(ab(this,function(jk){"aborted"!=jk.type&&(jk=ra(jk),this.dispatchEvent(jk));}));};function vj(ek,fk,gk){if(fk=ak(ek,fk))wj(ek,fk),xj(ek,fk.start,fk.end);0!=gk?(gk=ek.f.currentTime+gk,ek.f.currentTime=gk,ek.l=gk):gk=ek.f.currentTime;ek.a.b&&fk&&(ek.B=fk.end-gk,ek.B=Math.max(ek.B,0));ek.f.playbackRate=ek.ha;ek.a.b&&null!=ek.a.f&&ek.pb(ek.B);bk(ek);ek.P.resolve();}function wj(ek,fk){if(ek.a.b){isNaN(ek.g.duration)&&(ek.g.duration=fk.end+2592000);}else if(isNaN(ek.g.duration)||fk.end>ek.g.duration){ek.g.duration=fk.end;for(var gk=0;gk<ek.g.sourceBuffers.length;++gk)ek.g.sourceBuffers[gk].appendWindowEnd=fk.end;}}j.Ya=function(){this.C=null;bk(this);var ek=ak(this,zj(this));ek&&(xj(this,ek.start,ek.end),this.f.paused||yj(this,this.f.currentTime,ek.start,ek.end));};function xj(ek,fk,gk){fk=qa({type:"seekrangechanged",bubbles:true,start:fk,end:gk});ek.dispatchEvent(fk);}j.Ua=function(){var ek=this.f.currentTime;if(null!=this.l){if(ek>=this.l-.01&&ek<=this.l+.01){this.l=null;return;}this.l=null;}var fk=ak(this,zj(this));if(fk){var gk=fk.end;(fk=yj(this,ek,fk.start,gk))||(ek<=gk+.01?fk=false:(this.f.currentTime=gk,fk=true));if(!fk)for(var hk in this.c)this.c[hk].Ca();}};function yj(ek,fk,gk,hk){if(fk>=gk-.01)return false;fk=0;if(ek.a.b){fk=.5;for(var ik in ek.c)if(!ek.c[ik].Da(gk+fk)){fk=ek.a.c;break;}}ek.f.currentTime=Math.min(gk+fk,hk);return true;}j.Wa=function(){if(!this.a.b){for(var ek in this.c)if(!this.c[ek].Aa())return;this.g.endOfStream();}};j.ib=function(){var ek=this.A,fk=this.T.getBandwidth();ek.estimatedBandwidth=fk;ek.bandwidthHistory.push(new di(fk));};function zj(ek){return ud(ek.c).map(function(fk){return fk.za();}).filter(function(fk){return null!=fk;});}function ak(ek,fk){for(var gk=0,hk=Number.POSITIVE_INFINITY,ik=0;ik<fk.length;++ik){var jk;jk=fk[ik];jk=0<jk.length()?{start:vg(jk).b,end:wg(jk).a}:{start:0,end:0};gk=Math.max(gk,jk.start);null!=jk.end&&(hk=Math.min(hk,jk.end));}if(hk==Number.POSITIVE_INFINITY)if(hk=ek.a.a[0],hk.b){hk=(hk.start||0)+hk.b;}else return null;ek.a.b&&(hk=Math.max(hk-(ek.a.c+ek.B),gk));if(gk>hk)return null;hk=Math.floor(100000*hk)/100000;return {start:gk,end:hk};}function bk(ek){ek.a.b&&(ek.C=i.setTimeout(ek.Ya.bind(ek),1000));}function ck(ek){for(var fk in ek.c)ek.c[fk].A(ek.M);}j.ua=function(){return this.Z;};gj.prototype.getLongestInitResponseTime=gj.prototype.ua;function dk(ek,fk,gk,hk){gk||(gk=new rd());hk||(hk=new dj());gj.call(this,null,gk,hk);"string"===typeof ek?this.ra=ek:this.ja=ek;this.ia=fk;this.X=[];this.ea=[];this.fa=[];this.R=null;}m(dk,gj);l("shaka.player.DashVideoSource",dk);dk.prototype.sa=function(ek,fk,gk){this.X.push(ek);this.ea.push(fk||"");this.fa.push(gk||"");};dk.prototype.addExternalCaptions=dk.prototype.sa;dk.prototype.Ia=function(ek){this.R=ek;};dk.prototype.setNetworkCallback=dk.prototype.Ia;dk.prototype.destroy=function(){this.R=this.ia=null;gj.prototype.destroy.call(this);};dk.prototype.Y=function(){var ek=ab(this,function(gk){for(var hk=0;hk<this.X.length;hk++){var ik=gk,jk=this.X[hk],kk=this.ea[hk],lk=this.fa[hk];if(0!==ik.a.length){var mk=new re();mk.contentType="text";mk.lang=kk||"en";mk.c=true;kk=new ue();kk.bandwidth=0;kk.f=lk||"text/vtt";kk.m=[new ae(jk)];mk.a.push(kk);ik.a[0].b.push(mk);jf(ik.a[0]);}}if("dynamic"==gk.type)return gk=Error("Live manifest support not enabled."),gk.type="stream",Promise.reject(gk);hk=new ph(this.ia);ik=this.R;jk=(Date.now()+hb)/1000;for(lk=0;lk<gk.a.length;++lk)for(mk=gk.a[lk],kk=0;kk<mk.b.length;++kk){var nk=mk.b[kk];if("text"!=nk.contentType)for(var ok=0;ok<nk.a.length;++ok){var pk=nk.a[ok],qk=0,qk=qk+(pk.g?1:0),qk=qk+(pk.b?1:0),qk=qk+(pk.a?1:0);0==qk?(nk.a.splice(ok,1),--ok):1!=qk&&(pk.g?(pk.b=null,pk.a=null):pk.b&&(pk.a=null));}}qh(gk);for(lk=0;lk<gk.a.length;++lk)for(mk=gk.a[lk],kk=0;kk<mk.b.length;++kk){ok=nk=mk.b[kk];pk=null;for(qk=0;qk<ok.a.length;++qk){var rk=ok.a[qk].f||"";pk?rk!=pk&&(ok.a.splice(qk,1),--qk):pk=rk;}0==nk.a.length&&(mk.b.splice(kk,1),--kk);}"dynamic"==gk.type&&null==gk.c&&(gk.c=jk);jk=new nh();"dynamic"==gk.type&&(jk.b=true,jk.f=gk.f,jk.h=new hg(ik,gk.j||gk.url),jk.g=gk.c);jk.c=gk.g||5;for(lk=0;lk<gk.a.length;++lk){mk=gk.a[lk];if(null==mk.start)break;mk=rh(hk,gk,mk,ik);jk.a.push(mk);}this.a=jk;return gj.prototype.Y.call(this);});if(this.ja)return ek(this.ja);var fk=[new ae(this.ra)],fk=new hg(this.R,fk);return mg(new lg(fk,this.ga)).then(ek);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('VideoPlayerHTML5Shaka',['BlobFactory','CustomAbrManager','EventEmitter','EventListener','Event','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p,q=c('Shaka').player,r=q.Player,s=q.DashVideoSource,t=q.VideoTrack,u=c('Shaka').dash.mpd.parseMpd,v=c('Shaka').util,w=v.EWMACacheBandwidthEstimator,x=v.EWMASignedURLBandwidthEstimator,y=m.enableAdaptation?new w(m.cacheDelay,m.cacheBandwidth):new x();c('Shaka').polyfill.Fullscreen.install();function z(fa){var ga=fa.getVideoTracks();ga.sort(t.compare);return ga.pop().id;}function aa(fa){var ga=fa.getVideoTracks();ga.sort(t.compare);return ga.shift().id;}function ba(fa){var ga=h.getBlob([fa]);return URL.createObjectURL(ga);}function ca(fa,event){var ga=k.capture(fa.parentNode,event,function(ha){if(ha.target!=fa)return;ga.remove();l.kill(ha);});}function da(fa,ga){'use strict';this.$DisabledAbrManager1=fa;this.$DisabledAbrManager2=ga;}da.prototype.initialize=function(fa,ga){'use strict';this.$DisabledAbrManager3=ga;};da.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(z(this.$DisabledAbrManager3),false);};da.prototype.enable=function(){'use strict';};da.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return aa(this.$DisabledAbrManager3);var fa=this.$DisabledAbrManager1?z(this.$DisabledAbrManager3):aa(this.$DisabledAbrManager3);return fa;};da.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};o=babelHelpers.inherits(ea,j);p=o&&o.prototype;function ea(fa,ga,ha){'use strict';var ia=ha.playHighQualityTrack;p.constructor.call(this);this.$VideoPlayerHTML5Shaka1=true;var ja=k.listen(fa,'playing',(function(){this.$VideoPlayerHTML5Shaka1=false;ja.remove();}).bind(this));this.$VideoPlayerHTML5Shaka2=new r(fa);this.$VideoPlayerHTML5Shaka2.addEventListener('bufferingStart',(function(){return this.$VideoPlayerHTML5Shaka3();}).bind(this));this.$VideoPlayerHTML5Shaka2.addEventListener('bufferingEnd',(function(){return this.$VideoPlayerHTML5Shaka4();}).bind(this));this.$VideoPlayerHTML5Shaka2.addEventListener('error',(function(na){return this.$VideoPlayerHTML5Shaka5(na);}).bind(this));var ka=m.enableAdaptation?new i({forceHighQualityDefault:ia}):new da(ia,m.switchFromLowQuality);this.$VideoPlayerHTML5Shaka6=ka;var la=u(ga),ma=new s(la,null,y,ka);this.$VideoPlayerHTML5Shaka7=ma;this.$VideoPlayerHTML5Shaka8=fa;this.$VideoPlayerHTML5Shaka2.configure({enableAdaptation:m.enableAdaptation,streamBufferSize:m.streamBufferSize,initialStreamBufferSize:m.initialStreamBufferSize});this.$VideoPlayerHTML5Shaka2.load(ma);}ea.prototype.selectHighestQualityTrack=function(){'use strict';if(m.enableAdaptation){this.$VideoPlayerHTML5Shaka6.forceHighQuality(true);return;}this.$VideoPlayerHTML5Shaka2.selectVideoTrack(z(this.$VideoPlayerHTML5Shaka2),true);};ea.prototype.selectLowestQualityTrack=function(){'use strict';if(m.enableAdaptation){this.$VideoPlayerHTML5Shaka6.forceHighQuality(false);return;}this.$VideoPlayerHTML5Shaka2.selectVideoTrack(aa(this.$VideoPlayerHTML5Shaka2),false);};ea.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka9){this.$VideoPlayerHTML5Shaka10=true;this.$VideoPlayerHTML5Shaka11=true;n(this.$VideoPlayerHTML5Shaka8,'pause');this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka8.pause();};ea.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka9){this.$VideoPlayerHTML5Shaka10=false;this.$VideoPlayerHTML5Shaka11=true;n(this.$VideoPlayerHTML5Shaka8,'play');n(this.$VideoPlayerHTML5Shaka8,'waiting');this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(true);}else this.$VideoPlayerHTML5Shaka8.play();};ea.prototype.$VideoPlayerHTML5Shaka3=function(){'use strict';ca(this.$VideoPlayerHTML5Shaka8,'pause');this.$VideoPlayerHTML5Shaka9=true;this.$VideoPlayerHTML5Shaka10=false;this.$VideoPlayerHTML5Shaka11=false;this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(true);this.emit('bufferingStart');};ea.prototype.$VideoPlayerHTML5Shaka4=function(){'use strict';var fa=this;if(!this.$VideoPlayerHTML5Shaka10)ca(this.$VideoPlayerHTML5Shaka8,'play');if(!this.$VideoPlayerHTML5Shaka11)(function(){var ga=k.capture(fa.$VideoPlayerHTML5Shaka8.parentNode,'playing',(function(ha){if(ha.target!=this.$VideoPlayerHTML5Shaka8)return;ga.remove();if(this.$VideoPlayerHTML5Shaka1){this.$VideoPlayerHTML5Shaka1=false;return;}l.kill(ha);}).bind(fa));})();this.$VideoPlayerHTML5Shaka9=false;this.emit('bufferingEnd');};ea.prototype.$VideoPlayerHTML5Shaka5=function(fa){'use strict';var ga=fa.detail||{},ha=ga.type||'undefined',ia=ga.message;this.emit('error',{error:'SHAKA_'+ha.toUpperCase(),message:ia});};ea.prototype.hasSelectableVideoTracks=function(){'use strict';var fa=this.$VideoPlayerHTML5Shaka2.getVideoTracks();return fa.length>1;};ea.prototype.destroy=function(){'use strict';this.$VideoPlayerHTML5Shaka2.unload();this.$VideoPlayerHTML5Shaka2=null;};ea.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka7.getLongestInitResponseTime();};ea.isSupported=function(){'use strict';return r.isBrowserSupported();};f.exports=ea;},null);