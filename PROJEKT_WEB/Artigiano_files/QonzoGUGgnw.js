/*!CK:861818185!*//*1453403815,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["HMYtm"]); }

__d('ReactTransitionEvents',['ExecutionEnvironment'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={transitionend:{transition:'transitionend',WebkitTransition:'webkitTransitionEnd',MozTransition:'mozTransitionEnd',OTransition:'oTransitionEnd',msTransition:'MSTransitionEnd'},animationend:{animation:'animationend',WebkitAnimation:'webkitAnimationEnd',MozAnimation:'mozAnimationEnd',OAnimation:'oAnimationEnd',msAnimation:'MSAnimationEnd'}},j=[];function k(){var o=document.createElement('div'),p=o.style;if(!('AnimationEvent' in window))delete i.animationend.animation;if(!('TransitionEvent' in window))delete i.transitionend.transition;for(var q in i){var r=i[q];for(var s in r)if(s in p){j.push(r[s]);break;}}}if(h.canUseDOM)k();function l(o,p,q){o.addEventListener(p,q,false);}function m(o,p,q){o.removeEventListener(p,q,false);}var n={addEndEventListener:function(o,p){if(j.length===0){window.setTimeout(p,0);return;}j.forEach(function(q){l(o,q,p);});},removeEndEventListener:function(o,p){if(j.length===0)return;j.forEach(function(q){m(o,q,p);});}};f.exports=n;},null);
__d('ReactCSSTransitionGroupChild',['React','ReactDOM','CSSCore','ReactTransitionEvents','onlyChild'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=17,n=h.createClass({displayName:'ReactCSSTransitionGroupChild',propTypes:{name:h.PropTypes.oneOfType([h.PropTypes.string,h.PropTypes.shape({enter:h.PropTypes.string,leave:h.PropTypes.string,active:h.PropTypes.string}),h.PropTypes.shape({enter:h.PropTypes.string,enterActive:h.PropTypes.string,leave:h.PropTypes.string,leaveActive:h.PropTypes.string,appear:h.PropTypes.string,appearActive:h.PropTypes.string})]).isRequired,appear:h.PropTypes.bool,enter:h.PropTypes.bool,leave:h.PropTypes.bool,appearTimeout:h.PropTypes.number,enterTimeout:h.PropTypes.number,leaveTimeout:h.PropTypes.number},transition:function(o,p,q){var r=i.findDOMNode(this);if(!r){if(p)p();return;}var s=this.props.name[o]||this.props.name+'-'+o,t=this.props.name[o+'Active']||s+'-active',u=null,v=function(w){if(w&&w.target!==r)return;clearTimeout(u);j.removeClass(r,s);j.removeClass(r,t);k.removeEndEventListener(r,v);if(p)p();};j.addClass(r,s);this.queueClass(t);if(q){u=setTimeout(v,q);this.transitionTimeouts.push(u);}else k.addEndEventListener(r,v);},queueClass:function(o){this.classNameQueue.push(o);if(!this.timeout)this.timeout=setTimeout(this.flushClassNameQueue,m);},flushClassNameQueue:function(){if(this.isMounted())this.classNameQueue.forEach(j.addClass.bind(j,i.findDOMNode(this)));this.classNameQueue.length=0;this.timeout=null;},componentWillMount:function(){this.classNameQueue=[];this.transitionTimeouts=[];},componentWillUnmount:function(){if(this.timeout)clearTimeout(this.timeout);this.transitionTimeouts.forEach(function(o){clearTimeout(o);});},componentWillAppear:function(o){if(this.props.appear){this.transition('appear',o,this.props.appearTimeout);}else o();},componentWillEnter:function(o){if(this.props.enter){this.transition('enter',o,this.props.enterTimeout);}else o();},componentWillLeave:function(o){if(this.props.leave){this.transition('leave',o,this.props.leaveTimeout);}else o();},render:function(){return l(this.props.children);}});f.exports=n;},null);
__d('ReactTransitionChildMapping',['flattenChildren'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={getChildMapping:function(j){if(!j)return j;return h(j);},mergeChildMappings:function(j,k){j=j||{};k=k||{};function l(t){if(k.hasOwnProperty(t)){return k[t];}else return j[t];}var m={},n=[];for(var o in j)if(k.hasOwnProperty(o)){if(n.length){m[o]=n;n=[];}}else n.push(o);var p,q={};for(var r in k){if(m.hasOwnProperty(r))for(p=0;p<m[r].length;p++){var s=m[r][p];q[m[r][p]]=l(s);}q[r]=l(r);}for(p=0;p<n.length;p++)q[n[p]]=l(n[p]);return q;}};f.exports=i;},null);
__d('ReactTransitionGroup',['React','ReactTransitionChildMapping','Object.assign','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'ReactTransitionGroup',propTypes:{component:h.PropTypes.any,childFactory:h.PropTypes.func},getDefaultProps:function(){return {component:'span',childFactory:k.thatReturnsArgument};},getInitialState:function(){return {children:i.getChildMapping(this.props.children)};},componentWillMount:function(){this.currentlyTransitioningKeys={};this.keysToEnter=[];this.keysToLeave=[];},componentDidMount:function(){var m=this.state.children;for(var n in m)if(m[n])this.performAppear(n);},componentWillReceiveProps:function(m){var n=i.getChildMapping(m.children),o=this.state.children;this.setState({children:i.mergeChildMappings(o,n)});var p;for(p in n){var q=o&&o.hasOwnProperty(p);if(n[p]&&!q&&!this.currentlyTransitioningKeys[p])this.keysToEnter.push(p);}for(p in o){var r=n&&n.hasOwnProperty(p);if(o[p]&&!r&&!this.currentlyTransitioningKeys[p])this.keysToLeave.push(p);}},componentDidUpdate:function(){var m=this.keysToEnter;this.keysToEnter=[];m.forEach(this.performEnter);var n=this.keysToLeave;this.keysToLeave=[];n.forEach(this.performLeave);},performAppear:function(m){this.currentlyTransitioningKeys[m]=true;var n=this.refs[m];if(n.componentWillAppear){n.componentWillAppear(this._handleDoneAppearing.bind(this,m));}else this._handleDoneAppearing(m);},_handleDoneAppearing:function(m){var n=this.refs[m];if(n.componentDidAppear)n.componentDidAppear();delete this.currentlyTransitioningKeys[m];var o=i.getChildMapping(this.props.children);if(!o||!o.hasOwnProperty(m))this.performLeave(m);},performEnter:function(m){this.currentlyTransitioningKeys[m]=true;var n=this.refs[m];if(n.componentWillEnter){n.componentWillEnter(this._handleDoneEntering.bind(this,m));}else this._handleDoneEntering(m);},_handleDoneEntering:function(m){var n=this.refs[m];if(n.componentDidEnter)n.componentDidEnter();delete this.currentlyTransitioningKeys[m];var o=i.getChildMapping(this.props.children);if(!o||!o.hasOwnProperty(m))this.performLeave(m);},performLeave:function(m){this.currentlyTransitioningKeys[m]=true;var n=this.refs[m];if(n.componentWillLeave){n.componentWillLeave(this._handleDoneLeaving.bind(this,m));}else this._handleDoneLeaving(m);},_handleDoneLeaving:function(m){var n=this.refs[m];if(n.componentDidLeave)n.componentDidLeave();delete this.currentlyTransitioningKeys[m];var o=i.getChildMapping(this.props.children);if(o&&o.hasOwnProperty(m)){this.performEnter(m);}else this.setState(function(p){var q=j({},p.children);delete q[m];return {children:q};});},render:function(){var m=[];for(var n in this.state.children){var o=this.state.children[n];if(o)m.push(h.cloneElement(this.props.childFactory(o),{ref:n,key:n}));}return h.createElement(this.props.component,this.props,m);}});f.exports=l;},null);
__d('ReactCSSTransitionGroup',['React','Object.assign','ReactTransitionGroup','ReactCSSTransitionGroupChild'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();function l(n){var o='transition'+n+'Timeout',p='transition'+n;return function(q){if(q[p])if(q[o]==null){return new Error(o+' wasn\'t supplied to ReactCSSTransitionGroup: '+'this can cause unreliable animations and won\'t be supported in '+'a future version of React. See '+'https://fb.me/react-animation-transition-group-timeout for more '+'information.');}else if(typeof q[o]!=='number')return new Error(o+' must be a number (in milliseconds)');};}var m=h.createClass({displayName:'ReactCSSTransitionGroup',propTypes:{transitionName:k.propTypes.name,transitionAppear:h.PropTypes.bool,transitionEnter:h.PropTypes.bool,transitionLeave:h.PropTypes.bool,transitionAppearTimeout:l('Appear'),transitionEnterTimeout:l('Enter'),transitionLeaveTimeout:l('Leave')},getDefaultProps:function(){return {transitionAppear:false,transitionEnter:true,transitionLeave:true};},_wrapChild:function(n){return h.createElement(k,{name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},n);},render:function(){return h.createElement(j,i({},this.props,{childFactory:this._wrapChild}));}});f.exports=m;},null);
__d('AnimatedImageMarauderLogger',['MarauderLogger'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){'use strict';this.$AnimatedImageMarauderLogger1=false;this.$AnimatedImageMarauderLogger2=null;this.$AnimatedImageMarauderLogger3=null;this.$AnimatedImageMarauderLogger4=false;this.$AnimatedImageMarauderLogger5=false;this.$AnimatedImageMarauderLogger6=false;this.$AnimatedImageMarauderLogger7=null;this.$AnimatedImageMarauderLogger8=false;this.$AnimatedImageMarauderLogger9=null;this.$AnimatedImageMarauderLogger10=null;this.$AnimatedImageMarauderLogger11=0;this.$AnimatedImageMarauderLogger12=false;}i.prototype.initSession=function(j,k,l,m,n,o){'use strict';this.$AnimatedImageMarauderLogger1=j;this.$AnimatedImageMarauderLogger13=k;this.$AnimatedImageMarauderLogger6=m;this.$AnimatedImageMarauderLogger7=l;this.$AnimatedImageMarauderLogger8=n;this.$AnimatedImageMarauderLogger9=o;this.$AnimatedImageMarauderLogger4=true;};i.prototype.hasCurrentSession=function(){'use strict';return this.$AnimatedImageMarauderLogger4;};i.prototype.logAnimatedRender=function(j){'use strict';if(this.$AnimatedImageMarauderLogger10&&this.$AnimatedImageMarauderLogger11===0){this.$AnimatedImageMarauderLogger2=j-this.$AnimatedImageMarauderLogger10;this.$AnimatedImageMarauderLogger5=true;}};i.prototype.logStaticClick=function(j){'use strict';this.$AnimatedImageMarauderLogger10=j;this.$AnimatedImageMarauderLogger12=true;};i.prototype.endSession=function(j){'use strict';if(this.$AnimatedImageMarauderLogger9)this.$AnimatedImageMarauderLogger11=j-this.$AnimatedImageMarauderLogger9;this.$AnimatedImageMarauderLogger4=false;this.logSession();};i.prototype.logSession=function(){'use strict';var j={autoplay:this.$AnimatedImageMarauderLogger1,download_time:this.$AnimatedImageMarauderLogger2,is_video:this.$AnimatedImageMarauderLogger6,image_src:this.$AnimatedImageMarauderLogger7,fbid:this.$AnimatedImageMarauderLogger13,load_succeeded:this.$AnimatedImageMarauderLogger5,plays_inline:this.$AnimatedImageMarauderLogger8,time_spent:this.$AnimatedImageMarauderLogger11,was_tapped:this.$AnimatedImageMarauderLogger12};h.log('animated_image_session',undefined,j);};f.exports=i;},null);
__d('FeedAnimatedImageShare.react',['DOMContainer.react','OnVisible.react','Image.react','AnimatedImageMarauderLogger','Event','React','ReactDOM','ReactTransitionEvents','SubscriptionsHandler','VideoPlayerReason','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=m.PropTypes,t=20,u=m.createClass({displayName:'FeedAnimatedImageShare',_subscriptions:null,propTypes:{animatedSrc:s.string,autoplay:s.bool,fbid:s.string,height:s.number.isRequired,href:s.string.isRequired,isPlayableInline:s.bool,overlay:s.object,staticSrc:s.string,videoController:s.object,videoElement:s.object,width:s.number.isRequired},getDefaultProps:function(){return {autoplay:false,isPlayableInline:false};},getInitialState:function(){return {disableAutoplay:false,hasPlayedAtleastOnce:false,isLoaded:false,isLoading:false,isPlaying:false,wasPlaying:false};},componentDidMount:function(){this._animatedMarauderLogger=new k();if(this.refs.playButton)o.addEndEventListener(n.findDOMNode(this.refs.playButton),this.play);this._initVideoPlayer();},_initVideoPlayer:function(){if(!this.props.videoController||!this.refs.videoPlayer)return;n.findDOMNode(this.refs.videoPlayer).addEventListener('click',this._onClick);this.props.videoController.addListener('finishPlayback',(function(){window.setTimeout((function(){this.props.videoController.play(q.LOOP);}).bind(this),1);}).bind(this));this._subscriptions=new p();this._subscriptions.addSubscriptions(l.listen(window,'blur',this._onHidden),l.listen(window,'focus',this._onVisible));},componentWillUnmount:function(){if(this._subscriptions)this._subscriptions.release();},_shouldAutoplay:function(){return this.props.autoplay&&!this.state.disableAutoplay;},_showAnimatedImage:function(){if(this.state.isLoading)return;this.setState({isLoading:true});var v=new Image();v.onload=(function(){this.setState({hasPlayedAtleastOnce:true,isLoaded:true,isLoading:false});this._animatedMarauderLogger.logAnimatedRender(Date.now());}).bind(this);v.src=this.props.animatedSrc;},_onClick:function(){this.setState({disableAutoplay:true});if(!this.props.isPlayableInline){window.open(this.props.href,'_blank');return;}if(this.state.isPlaying){this.pause(q.USER);}else this.play(q.USER);},_renderClickToPlayButton:function(){var v=this.props.isPlayableInline&&(!this.state.isPlaying||this.state.isLoading),w=this.state.isLoading,x=!this.state.hasPlayedAtleastOnce&&this.state.isLoaded;return (m.createElement('div',{className:!v?"hidden_elem":'',onClick:this._onClick},m.createElement('div',{ref:'playButton',className:"_393-"+(x?' '+"_30a":'')}),m.createElement('div',{className:"_30b"+(w?' '+"_30c":'')+(x?' '+"_30e":'')}),m.createElement('div',{className:"_30h"+(x?' '+"_30i":'')})));},_initSession:function(){this._animatedMarauderLogger.initSession(this.props.autoplay,this.props.fbid,this.props.href,this.props.isPlayableInline,!!this.props.videoController,Date.now());},_endSession:function(){if(this._animatedMarauderLogger&&this._animatedMarauderLogger.hasCurrentSession())this._animatedMarauderLogger.endSession(Date.now());},_onVisible:function(){this._initSession();if(!this.state.isPlaying&&this.props.isPlayableInline&&(this._shouldAutoplay()||this.state.wasPlaying))this.play(this.state.wasPlaying?q.PAGE_VISIBILITY:q.AUTOPLAY);},_onHidden:function(){this._endSession();this.setState({wasPlaying:this.state.isPlaying});if(this.state.isPlaying)this.pause(q.PAGE_VISIBILITY);},_getStaticImageElement:function(){if(!this.props.staticSrc)return null;return (m.createElement(j,{className:"_9_m _30j",src:this.props.staticSrc,width:this.props.width,height:this.props.height,onClick:this._onClick}));},_getAnimatedImageElement:function(){return (m.createElement(j,{className:"_9_m",src:this.props.animatedSrc,width:this.props.width,height:this.props.height,onClick:this._onClick}));},_getImageElement:function(){if(!this.state.isPlaying||!this.state.isLoaded||!this.props.isPlayableInline)return this._getStaticImageElement();return this._getAnimatedImageElement();},_getVideoElement:function(){if(!this.props.videoElement)return null;return (m.createElement('span',null,m.createElement('span',{className:!this.state.hasPlayedAtleastOnce?"hidden_elem":''},m.createElement(h,{ref:'videoPlayer'},this.props.videoElement)),m.createElement('span',{className:this.state.hasPlayedAtleastOnce?"hidden_elem":''},this._getStaticImageElement())));},_getOverlay:function(){if(this.state.isPlaying||!this.props.overlay)return null;return m.createElement(h,null,this.props.overlay);},play:function(v){this._animatedMarauderLogger.logStaticClick(Date.now());this.setState({isPlaying:true});if(this.props.videoController){if(!this.state.hasPlayedAtleastOnce)this.setState({hasPlayedAtleastOnce:true});this.props.videoController.play(v);}else this._showAnimatedImage();},pause:function(v){this.setState({isPlaying:false});if(this.props.videoController)this.props.videoController.pause(v);},render:function(){var v=-1*(this.props.height*t/100);return (m.createElement(i,{onVisible:this._onVisible,onHidden:this._onHidden,buffer:v},m.createElement('div',null,this._getVideoElement()||this._getImageElement(),this._renderClickToPlayButton(),this._getOverlay())));}});f.exports=u;},null);