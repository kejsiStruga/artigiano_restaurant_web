/*!CK:4207297864!*//*1453236388,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["O\/Q4n"]); }

__d("XComposerActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composer\/actor\/change\/",{composer_id:{type:"String",required:true},entry_point:{type:"Enum",required:true,enumType:1},from_actor_id:{type:"Int",required:true},target_id:{type:"Int",required:true}});},null);
__d('ComposerXActorSelector.react',['ActorSelector.react','ActorSelectorNuxTypes','ActorURI','Arbiter','AsyncRequest','React','emptyFunction','XActorSelectorNuxSeenWriteController','XComposerActorChangeController','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=m.PropTypes,s=m.createClass({displayName:'ComposerXActorSelector',propTypes:{actorIDs:r.array.isRequired,composerID:r.string.isRequired,entryPoint:r.string.isRequired,nuxEnabled:r.bool,nuxHoverContext:r.object,onChange:r.func,pagePermissions:r.object.isRequired,selectedActorID:r.string.isRequired,settingsURI:r.string,targetID:r.string.isRequired},getInitialState:function(){return {loading:false};},componentWillMount:function(){this._arbiterToken=k.subscribe('ComposerXPages/composePostWithActor',(function(t,u){if(u.actorID){if(this.props.onChange){this.props.onChange(u.actorID);return;}this._updateCurrentActor(u.actorID,function(){if(u.callback)u.callback();});}}).bind(this));},componentWillUnmount:function(){k.unsubscribe(this._arbiterToken);},render:function(){return (m.createElement(h,{actorIDs:this.props.actorIDs,actorPermissions:this.props.pagePermissions,className:this.props.className,loading:this.state.loading,nuxBody:this._getNUXBody(),nuxEnabled:this.props.nuxEnabled,nuxHoverContext:this.props.nuxHoverContext,onChange:this._onChange,onCompleteNux:this._onCompleteNux,ref:'selector',selectedActorID:this.props.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this._getTooltipForActorName}));},_getNUXBody:function(){return q._("Choose whether to post as yourself or as one of the Pages you manage.");},_getTooltipForActorName:function(t){return q._("Posting as {actorName}",[q.param('actorName',t)]);},_onChange:function(t){if(this.props.onChange){this.props.onChange(t.value);}else this._updateCurrentActor(t.value);},_updateCurrentActor:function(t,u){u=u||n;if(this.props.selectedActorID===t){u();return;}this.setState({loading:true});var v=j.create(p.getURIBuilder().setString('composer_id',this.props.composerID).setEnum('entry_point',this.props.entryPoint).setInt('from_actor_id',this.props.selectedActorID).setInt('target_id',this.props.targetID).getURI(),t),w=(function(){this.setState({loading:false});}).bind(this);new l().setURI(v).setErrorHandler(w).setServerDialogCancelHandler(w).setFinallyHandler(u).send();},_onCompleteNux:function(){var t=o.getURIBuilder().setEnum('nux_type',i.COMPOSER).getURI();new l().setURI(t).send();}});f.exports=s;},null);