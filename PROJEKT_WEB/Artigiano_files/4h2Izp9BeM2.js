/*!CK:170781406!*//*1453185866,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["CD1\/B"]); }

__d('UFIAddCommentController',['Parent','React','ReactDOM','ShortProfiles','UFIActionTypes','UFIAddComment.react','UFICallbackStore','UFICentralUpdates','UFIDispatcher','UFIDispatcherContext.react','UFIFeedbackTargets','UFIInstanceState','UFINewCommentNotifier'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();function u(v,w){this._root=v;this._contextArgs=w;this._contextArgs.rootid=v.id;this._dispatcher=new p();this._stores={UFICallbackStore:new n(this._dispatcher)};this._stores.UFICallbackStore.on(l.ADD_COMMENT.SUBMIT_NEW,(function(x){return t.onNewComment(h.byTag(v,'form'),this._contextArgs,x.comment,x.target,x.replyCommentID,x.timestamp);}).bind(this));this.render();o.subscribe('instance-updated',(function(x,y){var z=y.updates;if(this._contextArgs.instanceid in z)this.render();}).bind(this));o.subscribe('feedback-updated',(function(x,y){var z=y.updates;if(this._contextArgs.ftentidentifier in z)this.render();}).bind(this));o.subscribe('feedback-id-changed',(function(x,y){var z=this._contextArgs.ftentidentifier,aa=y.updates;if(z in aa)this._contextArgs=babelHelpers._extends({},this._contextArgs,{ftentidentifier:aa[z]});}).bind(this));}Object.assign(u.prototype,{render:function(){var v=this._contextArgs,w=s.getKeyForInstance(v.instanceid,'isediting');r.getFeedbackTarget(v.ftentidentifier,(function(x){if(!w&&x.cancomment&&x.actorforpost)k.get(x.actorforpost,(function(y){var z=i.createElement(q,{dispatcher:this._dispatcher,stores:this._stores},i.createElement(m,{viewerActorID:x.actorforpost,replyCommentID:null,targetID:x.ownerid,initialData:null,ref:null,withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:x.mentionsdatasource,showSendOnEnterTip:x.showsendonentertip,allowPhotoAttachments:x.allowphotoattachments&&!v.isstreaming,allowStickerAttachments:x.allowstickerattachments&&!v.isstreaming,contextArgs:v,subtitle:x.subtitle,isQAndA:x.isqanda}));j.render(z,this._root);}).bind(this));}).bind(this));}});f.exports=u;},null);
__d('QuestionsCommentLink',['DOM','Parent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(l){var m=l&&i.byClass(l,'questionsFeedback'),n=m&&h.scry(m,'.addCommentForm')[0];n&&(n.add_comment_text_text||n.add_comment_text).focus();}var k={question_comment_click:j};b.question_comment_click=j;f.exports=k;},null);
__d('QuestionsFeedback',['Event','Arbiter','DOM','ScrollableArea','UFIUIEvents'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();Object.assign(m,{init:function(n,o){new m(n,o);}});function m(n,o){this._comments=n;this._add_comment=o;i.subscribe(l.Comment,(function(p,q){this._scrollComments(q.isinverted?'toTop':'toBottom');}).bind(this));this._initCommentTextAreaAndFocusListener();}Object.assign(m.prototype,{_scrollComments:function(n){var o=this._comments&&j.scry(this._comments,'.uiScrollableAreaWrap')[0],p=o&&k.getInstance(o);if(n==='toTop'){p&&p.scrollToTop();}else p&&p.scrollToBottom();},_initCommentTextAreaAndFocusListener:function(){var n=this._add_comment&&j.scry(this._add_comment,'.questionsFeedbackAddComment textarea')[0];if(!n)return;this._focusListener=h.listen(n,'focus',this._scrollComments.bind(this));}});f.exports=m;},null);